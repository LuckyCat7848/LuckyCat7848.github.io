<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title></title>
    <description>Everything is well !</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 21 Mar 2017 23:33:52 +0800</pubDate>
    <lastBuildDate>Tue, 21 Mar 2017 23:33:52 +0800</lastBuildDate>
    <generator>Jekyll v3.3.0</generator>
    
      <item>
        <title>GPUImageå­¦ä¹ æ€»ç»“</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#section&quot; id=&quot;markdown-toc-section&quot;&gt;ä¸€ã€ä»‹ç»&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#section-1&quot; id=&quot;markdown-toc-section-1&quot;&gt;äºŒã€å†…ç½®æ»¤é•œ&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#section-2&quot; id=&quot;markdown-toc-section-2&quot;&gt;ä¸‰ã€åˆ†æ®µå½•åˆ¶&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#gpuimage&quot; id=&quot;markdown-toc-gpuimage&quot;&gt;å››ã€ GPUImageå½•åˆ¶è§†é¢‘&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#section-3&quot; id=&quot;markdown-toc-section-3&quot;&gt;4.1 åŸºæœ¬è®¾ç½®&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#section-4&quot; id=&quot;markdown-toc-section-4&quot;&gt;4.2 å¼€å§‹å½•åˆ¶&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#section-5&quot; id=&quot;markdown-toc-section-5&quot;&gt;4.3 åœæ­¢å½•åˆ¶&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#section-6&quot; id=&quot;markdown-toc-section-6&quot;&gt;4.4 è§†é¢‘æ‹¼æ¥&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#section-7&quot; id=&quot;markdown-toc-section-7&quot;&gt;äº”ã€è§†é¢‘åŠ æ»¤é•œåŠŸèƒ½&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#section-8&quot; id=&quot;markdown-toc-section-8&quot;&gt;5.1 å•ä¸ªæ»¤é•œ&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#section-9&quot; id=&quot;markdown-toc-section-9&quot;&gt;5.2 ç»„åˆæ»¤é•œ&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#section-10&quot; id=&quot;markdown-toc-section-10&quot;&gt;5.3 æ·»åŠ æ»¤é•œ&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#mv&quot; id=&quot;markdown-toc-mv&quot;&gt;å…­ã€è§†é¢‘åŠ MVåŠŸèƒ½&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#section-11&quot; id=&quot;markdown-toc-section-11&quot;&gt;ä¸ƒã€å­¦ä¹ &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;section&quot;&gt;ä¸€ã€ä»‹ç»&lt;/h1&gt;
&lt;p&gt;GPUImageæ˜¯Brad Larsonåœ¨githubæ‰˜ç®¡çš„å¼€æºé¡¹ç›®ã€‚&lt;/p&gt;

&lt;p&gt;GPUImageæ˜¯ä¸€ä¸ªåŸºäºGPUå›¾åƒå’Œè§†é¢‘å¤„ç†çš„å¼€æºiOSæ¡†æ¶ï¼Œæä¾›å„ç§å„æ ·çš„å›¾åƒå¤„ç†æ»¤é•œï¼Œå¹¶ä¸”æ”¯æŒç…§ç›¸æœºå’Œæ‘„åƒæœºçš„å®æ—¶æ»¤é•œï¼› åŸºäºGPUçš„å›¾åƒåŠ é€Ÿï¼Œå› æ­¤å¯ä»¥åŠ é€Ÿå¯¹å®æ—¶æ‘„åƒå¤´è§†é¢‘ã€ç”µå½±ä»¥åŠimageçš„æ»¤é•œå’Œå…¶å®ƒæ•ˆæœå¤„ç†ï¼Œå¹¶ä¸”èƒ½å¤Ÿè‡ªå®šä¹‰å›¾åƒæ»¤é•œã€‚å¦å¤–ï¼Œ GPUImageæ”¯æŒARCã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨GPUImageå¤„ç†å›¾ç‰‡æ¯”Core Imageæ›´ç®€å•ï¼Œåªéœ€è¦å°†è¿‡æ»¤å™¨èµ‹ç»™å›¾ç‰‡å¯¹è±¡å³å¯ï¼Œä¸ç”¨è€ƒè™‘contextæˆ–è€…è®¾å¤‡ç­‰å…¶ä»–é—®é¢˜ã€‚GPUImageæä¾›äº†é™¤é«˜æ–¯æ¨¡ç³Šå¤–çš„å…¶ä»–å‡ ç§ä¸åŒæ•ˆæœçš„æ¨¡ç³Šï¼Œè™½ç„¶Core Imageä¹Ÿæä¾›äº†å‡ ç§æ¨¡ç³Šæ•ˆæœï¼Œä½†ç›®å‰åœ¨iOSä¸Šèƒ½ç”¨çš„å°±åªæœ‰é«˜æ–¯æ¨¡ç³Šï¼Œè€ŒGPUImageå¯ç”¨çš„æœ‰FastBlur, GaussianBlur, GaussianSelectiveBlur å’Œ BoxBlurã€‚æ­¤å¤–ï¼Œä½œä¸ºå¼€æºæ¡†æ¶çš„GPUImageè¿˜æ”¯æŒè‡ªå®šä¹‰çš„è¿‡æ»¤å™¨ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section-1&quot;&gt;äºŒã€å†…ç½®æ»¤é•œ&lt;/h1&gt;
&lt;p&gt;å…±125ä¸ªæ»¤é•œ, åˆ†ä¸ºå››ç±»
Color adjustments: 31 filters, é¢œè‰²å¤„ç†ç›¸å…³
Image processing: 40 filters, å›¾åƒå¤„ç†ç›¸å…³.
Blending modes: 29 filters, æ··åˆæ¨¡å¼ç›¸å…³.
Visual effects: 25 filters, è§†è§‰æ•ˆæœç›¸å…³.&lt;/p&gt;

&lt;h1 id=&quot;section-2&quot;&gt;ä¸‰ã€åˆ†æ®µå½•åˆ¶&lt;/h1&gt;
&lt;p&gt;å‚è€ƒ&lt;a href=&quot;http://www.tuicool.com/articles/FVnumu&quot;&gt;AVFoundationå’ŒGPUImageåˆæ¢&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åˆ†æ®µå½•åˆ¶ï¼Œæ¯æ¬¡å½•åˆ¶éƒ½è¦åˆ›å»ºä¸€ä¸ªmovieWriterï¼Œæ¯æ¬¡éƒ½ä¼šåœ¨é‡æ–°åˆ›å»ºmovieWriterå¹¶å°†å®ƒè®¾ç½®ä¸ºvideoCameraçš„ audioEncodingTarget æ—¶å€™ï¼Œç•Œé¢éƒ½ä¼šå¡é¡¿ä¸€ä¸‹ï¼Œè¿™æ˜¯å› ä¸ºvideoCameraé»˜è®¤æ˜¯ä¸å½•åˆ¶å£°éŸ³çš„ï¼Œè€Œæ¯æ¬¡åˆ›å»ºmovieWriterçš„æ—¶å€™éƒ½ç”¨åˆ°äº† movieWriter.hasAudioTrack = YESï¼Œè°ƒç”¨è¿™ä¸ªä¹‹åvideoCameraä¼šè‡ªåŠ¨å»æ·»åŠ å£°éŸ³è¾“å…¥æºï¼Œå‡†å¤‡ä¸€äº›æ•°æ®ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹ä¼šå¯¼è‡´ç•Œé¢å¡é¡¿ä¸€ä¸‹ï¼Œä¸‹é¢è¿™å¥ä»£ç å¾ˆé‡è¦ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;â€“ &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;BOOL&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;addAudioInputsAndOutputs;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;videoCameraçš„å¤´æ–‡ä»¶çš„æ³¨é‡Šæ˜¯ï¼šå½•åˆ¶çš„æ—¶å€™æ·»åŠ å£°éŸ³ï¼Œæ·»åŠ è¾“å…¥æºå’Œè¾“å‡ºæºä¼šæš‚æ—¶ä¼šä½¿å½•åˆ¶æš‚æ—¶å¡ä½ï¼Œæ‰€ä»¥åœ¨è¦ä½¿ç”¨å£°éŸ³çš„æƒ…å†µä¸‹è¦&lt;code class=&quot;highlighter-rouge&quot;&gt;å…ˆ&lt;/code&gt;è°ƒç”¨è¯¥æ–¹æ³•æ¥é˜²æ­¢å½•åˆ¶è¢«å¡ä½ã€‚&lt;/p&gt;

&lt;h1 id=&quot;gpuimage&quot;&gt;å››ã€ GPUImageå½•åˆ¶è§†é¢‘&lt;/h1&gt;
&lt;p&gt;è½¬è‡ª&lt;a href=&quot;http://blog.sina.com.cn/s/blog_d0c0c80c0102xbo0.html&quot;&gt;GPUImage å½•åˆ¶è§†é¢‘æ³¨æ„äº‹é¡¹&lt;/a&gt;ï¼Œæ„Ÿè°¢&lt;a href=&quot;http://blog.sina.com.cn/u/3502295052&quot;&gt;æˆ‘çš„ä¸ªç¥å•Š&lt;/a&gt;çš„åˆ†äº«ã€‚&lt;/p&gt;

&lt;h2 id=&quot;section-3&quot;&gt;4.1 åŸºæœ¬è®¾ç½®&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// åˆ›å»ºæ‘„åƒå¤´
self.videoCamera &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;GPUImageVideoCamera alloc] initWithSessionPreset:AVCaptureSessionPreset640x480 cameraPosition:AVCaptureDevicePositionBack];

self.videoCamera.outputImageOrientation &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; UIInterfaceOrientationPortrait; // è¾“å‡ºå›¾åƒæ—‹è½¬æ–¹å¼
self.videoCamera.horizontallyMirrorFrontFacingCamera &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES;

// åˆ›å»ºç•Œé¢æ˜¾ç¤ºæ‘„åƒå†…å®¹
self.gpuImageView &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;GPUImageView alloc] initWithFrame:frame];
self.gpuImageView.fillMode &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; kGPUImageFillModePreserveAspectRatioAndFill; // æ˜¾ç¤ºæ¨¡å¼å……æ»¡æ•´ä¸ªè¾¹æ¡†
self.gpuImageView.clipsToBounds &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.gpuImageView.layer setMasksToBounds:YES];

// æ»¤é•œ
self.filter &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;GPUImageBrightnessFilter alloc] init];
self.filter.brightness &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 0.1f;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-4&quot;&gt;4.2 å¼€å§‹å½•åˆ¶&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// è¯¥å¥å¯é˜²æ­¢å…è®¸å£°éŸ³é€šè¿‡çš„æƒ…å†µä¸‹ï¼Œé¿å…å½•åˆ¶ç¬¬ä¸€å¸§é»‘å±é—ªå±å¡é¡¿ç°è±¡ï¼ˆåˆ†æ®µå½•åˆ¶é‡Œæœ‰è¯¦è§£ï¼‰
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;_camera addAudioInputsAndOutputs];

// é…ç½®å½•åˆ¶å™¨
NSURL &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; saveURL &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self fileURLForTempMovieByName:[NSString stringWithFormat:@&lt;span class=&quot;s2&quot;&gt;&quot;%d&quot;&lt;/span&gt;, videoFileNum]]; // åˆ†æ®µå½•åˆ¶,videoFileNum:ç¬¬å‡ æ®µ
self.movieWriter &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;GPUImageMovieWriter alloc] initWithMovieURL:saveURL  size:CGSizeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;480.0f, 640.0f&lt;span class=&quot;o&quot;&gt;)]&lt;/span&gt;;

self.movieWriter.assetWriter.movieFragmentInterval &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; kCMTimeInvalid;
self.movieWriter.encodingLiveVideo &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES; // å½±å“å…¶å®æ˜¯expectsMediaDataInRealTimeå±æ€§ï¼ŒYESæ—¶ç”¨äºè¾“å…¥æµæ˜¯å®æ—¶çš„,æ¯”å¦‚è¯´æ‘„åƒå¤´
self.movieWriter.hasAudioTrack &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES; // å¼€å¯å£°éŸ³é‡‡é›†
self.movieWriter.shouldPassthroughAudio &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES; // æ˜¯å¦ä½¿ç”¨æºéŸ³æº

&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.filter addTarget:self.movieWriter]; // æ»¤é•œæ·»åŠ è‡³moviewrite
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.filter addTarget:self.gpuImageView]; // æ»¤é•œæ·»åŠ gpuimageview
self.videoCamera.audioEncodingTarget &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; self.movieWriter; // éŸ³é¢‘æ¥æºæ˜¯æ–‡ä»¶

// å¼€å§‹å½•åˆ¶
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.videoCamera startCameraCapture];
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.movieWriter startRecording];
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-5&quot;&gt;4.3 åœæ­¢å½•åˆ¶&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.filter removeTarget:self.movieWriter];
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.movieWriter finishRecording];
self.videoCamera.audioEncodingTarget &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; nil;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-6&quot;&gt;4.4 è§†é¢‘æ‹¼æ¥&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;4.4.1 AVFoundationåŸºæœ¬çŸ¥è¯†ç‚¹&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;AVAssetï¼šåª’ä½“ã€‚&lt;/p&gt;

&lt;p&gt;AVAssetTrackï¼šåª’ä½“è½¨é“ã€‚&lt;/p&gt;

&lt;p&gt;AVMutableComposition ï¼šåŒ…å«äº†ä¸€ä¸ªæˆ–å¤šä¸ªç»™å®šç±»å‹çš„åª’ä½“è½¨é“çš„å®¹å™¨ã€‚&lt;/p&gt;

&lt;p&gt;AVMutableCompositionTrack ï¼šå·¥ç¨‹æ–‡ä»¶ä¸­çš„è½¨é“ï¼Œæœ‰éŸ³é¢‘è½¨ã€è§†é¢‘è½¨ç­‰ï¼Œé‡Œé¢å¯ä»¥æ’å…¥å„ç§å¯¹åº”çš„ç´ æã€‚&lt;/p&gt;

&lt;p&gt;AVMutableVideoCompositionï¼šç”¨æ¥ç”Ÿæˆvideoçš„ç»„åˆæŒ‡ä»¤ï¼ŒåŒ…å«å¤šæ®µinstructionï¼Œå¯ä»¥å†³å®šæœ€ç»ˆè§†é¢‘çš„å°ºå¯¸ã€‚&lt;/p&gt;

&lt;p&gt;AVMutableVideoCompositionInstructionï¼šå†³å®šä¸€ä¸ªtimeRangeå†…æ¯ä¸ªè½¨é“çš„çŠ¶æ€ï¼ŒåŒ…å«å¤šä¸ªlayerInstructionã€‚&lt;/p&gt;

&lt;p&gt;AVMutableVideoCompositionLayerInstructionï¼šå†³å®šè§†é¢‘è½¨é“çš„æ•ˆæœ:æ¨¡ç³Šã€å˜å½¢ã€è£å‰ª,å¯åˆ›å»ºå‡ºè¿‡æ¸¡æ•ˆæœã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;4.4.2 åˆ†æ®µè§†é¢‘çš„æ‹¼æ¥&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#pragma mark -&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#pragma mark è§†é¢‘æ‹¼æ¥,è§†é¢‘å’ŒéŸ³é¢‘åˆæˆ å­˜å‚¨ä¸º:MergerMovie&lt;/span&gt;
- &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;void&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;mergeAndSaveMovieWithFirstAsset:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;AVAsset &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;firstAsset secondAsset:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;AVAsset &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;secondAsset &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    
    static int mergerFileNum &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1; // åˆæˆåçš„è§†é¢‘æ–‡ä»¶ä¸ªæ•°&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;å› ä¸ºæ˜¯é€’å½’åˆæˆ,ä¸ä¾¿åˆ é™¤ä¸Šä¸€ä¸ª,æ‰€ä»¥æœ‰å¤šä¸ªæ–‡ä»¶&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;firstAsset !&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;nil &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondAsset!&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;nil&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        // 1.åˆ›å»ºç»„åˆmixComposition,ç”¨äºåˆæˆè§†é¢‘,å’Œå£°éŸ³&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;è¦åˆ†åˆ«åˆ›å»ºç»„åˆè½¨é“&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
        AVMutableComposition &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;mixComposition &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;AVMutableComposition alloc] init];
        // 2.åˆ›å»º1å’Œ2çš„è§†é¢‘è½¨é“ã€éŸ³é¢‘è½¨é“,éƒ½åŠ å…¥ç»„åˆä¸­mixComposition
        AVMutableCompositionTrack &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;firstVideoTrack &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo
                                                                                 preferredTrackID:kCMPersistentTrackID_Invalid];
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;firstVideoTrack insertTimeRange:CMTimeRangeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;kCMTimeZero, firstAsset.duration&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
                                 ofTrack:[[firstAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0]
                                  atTime:kCMTimeZero
                                   error:nil];
        AVMutableCompositionTrack &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;firstAudioTrack &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio
                                                                                 preferredTrackID:kCMPersistentTrackID_Invalid];
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;firstAudioTrack insertTimeRange:CMTimeRangeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;kCMTimeZero, firstAsset.duration&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
                                 ofTrack:[[firstAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0]
                                  atTime:kCMTimeZero
                                   error:nil];
        
        
        AVMutableCompositionTrack &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;secondVideoTrack &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo
                                                                                  preferredTrackID:kCMPersistentTrackID_Invalid];
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;secondVideoTrack insertTimeRange:CMTimeRangeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;kCMTimeZero, secondAsset.duration&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
                                  ofTrack:[[secondAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0]
                                   atTime:firstAsset.duration
                                    error:nil];
        AVMutableCompositionTrack &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;secondAudioTrack &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio
                                                                                  preferredTrackID:kCMPersistentTrackID_Invalid];
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;secondAudioTrack insertTimeRange:CMTimeRangeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;kCMTimeZero, secondAsset.duration&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
                                  ofTrack:[[secondAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0]
                                   atTime:firstAsset.duration
                                    error:nil];
        
        // 3.åˆ›å»ºAVMutableVideoCompositionInstruction:ä¸€ä¸ªæŒ‡ä»¤ï¼Œå†³å®šä¸€ä¸ªtimeRangeå†…æ¯ä¸ªè½¨é“çš„çŠ¶æ€ï¼ŒåŒ…å«å¤šä¸ªlayerInstruction
        AVMutableVideoCompositionInstruction &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;mainInstruction &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVMutableVideoCompositionInstruction videoCompositionInstruction];
        mainInstruction.timeRange &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CMTimeRangeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;kCMTimeZero, CMTimeAdd&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;firstAsset.duration, secondAsset.duration&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt;;
        
        // 3-1.åˆ›å»ºç¬¬ä¸€ä¸ªAVMutableVideoCompositionLayerInstruction:å†³å®šè§†é¢‘è½¨é“çš„æ•ˆæœ:æ¨¡ç³Šã€å˜å½¢ã€è£å‰ª,å¯åˆ›å»ºå‡ºè¿‡æ¸¡æ•ˆæœ
        AVMutableVideoCompositionLayerInstruction &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;firstlayerInstruction &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:firstVideoTrack];
        AVAssetTrack &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;firstAssetTrack &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;firstAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
        UIImageOrientation firstAssetOrientation_  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; UIImageOrientationUp;
        BOOL isFirstAssetPortrait_  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; NO;
        CGAffineTransform firstTransform &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; firstAssetTrack.preferredTransform;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;firstTransform.a &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.b &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.c &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; -1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.d &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            firstAssetOrientation_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; UIImageOrientationRight;
            isFirstAssetPortrait_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;firstTransform.a &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.b &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; -1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.c &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.d &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            firstAssetOrientation_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  UIImageOrientationLeft;
            isFirstAssetPortrait_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;firstTransform.a &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.b &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.c &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.d &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 1.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            firstAssetOrientation_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  UIImageOrientationUp;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;firstTransform.a &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; -1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.b &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.c &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.d &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; -1.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            firstAssetOrientation_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; UIImageOrientationDown;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;firstlayerInstruction setTransform:firstAsset.preferredTransform atTime:kCMTimeZero];
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;firstlayerInstruction setOpacity:0.0 atTime:firstAsset.duration];
        
        // 3-2.åˆ›å»ºç¬¬äºŒä¸ªAVMutableVideoCompositionLayerInstruction
        AVMutableVideoCompositionLayerInstruction &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;secondlayerInstruction &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:secondVideoTrack];
        AVAssetTrack &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;secondAssetTrack &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;secondAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
        UIImageOrientation secondAssetOrientation_  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; UIImageOrientationUp;
        BOOL isSecondAssetPortrait_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; NO;
        CGAffineTransform secondTransform &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; secondAssetTrack.preferredTransform;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;secondTransform.a &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.b &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.c &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; -1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.d &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nv&quot;&gt;secondAssetOrientation_&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; UIImageOrientationRight;
            isSecondAssetPortrait_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;secondTransform.a &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.b &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; -1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.c &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.d &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            secondAssetOrientation_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  UIImageOrientationLeft;
            isSecondAssetPortrait_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;secondTransform.a &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.b &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.c &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.d &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 1.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            secondAssetOrientation_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  UIImageOrientationUp;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;secondTransform.a &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; -1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.b &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.c &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.d &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; -1.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            secondAssetOrientation_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; UIImageOrientationDown;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;secondlayerInstruction setTransform:secondAsset.preferredTransform atTime:firstAsset.duration];
        
        // AVMutableVideoComposition:ç”¨æ¥ç”Ÿæˆvideoçš„ç»„åˆæŒ‡ä»¤,åŒ…å«å¤šæ®µinstruction,å¯ä»¥å†³å®šæœ€ç»ˆè§†é¢‘çš„å°ºå¯¸
        // 3-3.AVMutableVideoCompositionæ·»åŠ instructions
        mainInstruction.layerInstructions &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;NSArray arrayWithObjects:firstlayerInstruction, secondlayerInstruction,nil];
        AVMutableVideoComposition &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;mainCompositionInst &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVMutableVideoComposition videoComposition];
        mainCompositionInst.instructions &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;NSArray arrayWithObject:mainInstruction];
        mainCompositionInst.frameDuration &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CMTimeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1, 30&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
        
        CGSize naturalSizeFirst, naturalSizeSecond;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;isFirstAssetPortrait_&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            naturalSizeFirst &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CGSizeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;firstAssetTrack.naturalSize.height, firstAssetTrack.naturalSize.width&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            naturalSizeFirst &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; firstAssetTrack.naturalSize;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;isSecondAssetPortrait_&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            naturalSizeSecond &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CGSizeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;secondAssetTrack.naturalSize.height, secondAssetTrack.naturalSize.width&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            naturalSizeSecond &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; secondAssetTrack.naturalSize;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        
        float renderWidth, renderHeight;
        renderWidth &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; naturalSizeFirst.width &amp;gt; naturalSizeSecond.width ? naturalSizeFirst.width : naturalSizeSecond.width;
        renderHeight &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; naturalSizeFirst.height &amp;gt; naturalSizeSecond.height ? naturalSizeFirst.height : naturalSizeSecond.height;
        mainCompositionInst.renderSize &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CGSizeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;renderWidth, renderHeight&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
        
        // 4.è·å–è·¯å¾„
        NSURL &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;url &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self fileURLForTempMovieByName:[NSString stringWithFormat:@&lt;span class=&quot;s2&quot;&gt;&quot;MergerMovie%d&quot;&lt;/span&gt;, mergerFileNum]];
        
        // 5.åˆ›å»ºAVAssetExportSession,ç”¨äºå¯¼å‡ºåˆæˆå¥½çš„è§†é¢‘
        AVAssetExportSession &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;exporter &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;AVAssetExportSession alloc] initWithAsset:mixComposition
                                                                          presetName:AVAssetExportPresetHighestQuality];
        exporter.outputURL&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;url;
        exporter.outputFileType &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; AVFileTypeMPEG4;//AVFileTypeQuickTimeMovie;
        exporter.shouldOptimizeForNetworkUse &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES;
        exporter.videoComposition &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; mainCompositionInst;
        __weak __typeof&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;weakSelf &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; self;
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;exporter exportAsynchronouslyWithCompletionHandler:^&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            dispatch_async&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;dispatch_get_main_queue&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;, ^&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                mergerFileNum ++;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;mergerFileNum &amp;lt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;_videoArray count]&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                    // å–åˆæˆå¥½çš„è§†é¢‘å’Œä¸‹ä¸€ä¸ª,é€’å½’è¿›è¡Œè§†é¢‘æ‹¼æ¥,æ‹¼æ¥åå’ŒéŸ³é¢‘åˆæˆ
                    AVAsset &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; nextAsset &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVAsset assetWithURL:[_videoArray objectAtIndex:mergerFileNum]];
                    AVAsset &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; mergerVideo &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVAsset assetWithURL:[weakSelf fileURLForTempMovieByName:[NSString stringWithFormat:@&lt;span class=&quot;s2&quot;&gt;&quot;MergerMovie%d&quot;&lt;/span&gt;, mergerFileNum - 1]]];
                    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;weakSelf mergeAndSaveMovieWithFirstAsset:mergerVideo secondAsset:nextAsset];
                &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                    // åˆæˆå®Œæˆ,å¯¼å‡º
                    mergerFileFinally &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;NSString stringWithFormat:@&lt;span class=&quot;s2&quot;&gt;&quot;MergerMovie%d&quot;&lt;/span&gt;, mergerFileNum - 1];
                    mergerFileNum &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1;
                    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;weakSelf exportDidFinish:exporter];
                &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;;
        &lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
- &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;void&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;exportDidFinish:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;AVAssetExportSession&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;session &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    __weak __typeof&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;weakSelf &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; self;
    dispatch_async&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;dispatch_get_main_queue&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;, ^&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;session.status &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; AVAssetExportSessionStatusCompleted&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            // è§†é¢‘æ‹¼æ¥æˆåŠŸ,å–å‡ºè§†é¢‘ä¸­çš„éŸ³é¢‘
            &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;weakSelf getAudioSound];
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            UIAlertView &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;alert &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;UIAlertView alloc] initWithTitle:@&lt;span class=&quot;s2&quot;&gt;&quot;Video Saved&quot;&lt;/span&gt; message:[NSString stringWithFormat:@&lt;span class=&quot;s2&quot;&gt;&quot;Saved To File Failed -- %d&quot;&lt;/span&gt;, session.status]
                                                           delegate:self cancelButtonTitle:@&lt;span class=&quot;s2&quot;&gt;&quot;OK&quot;&lt;/span&gt; otherButtonTitles:nil];
            &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;alert show];
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;4.4.3 ä»åˆæˆçš„è§†é¢‘å–å‡ºéŸ³é¢‘è½¨é“&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// ä»åˆæˆå¥½çš„è§†é¢‘ä¸­è·å–éŸ³é¢‘
- &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;void&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;getAudioSound &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    AVURLAsset &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;videoAsset &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVURLAsset URLAssetWithURL:[self fileURLForTempMovieByName:mergerFileFinally] options:nil];
    AVMutableComposition &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;mixComposition &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;AVMutableComposition alloc] init];
    //åˆ›å»ºä¸€ä¸ªç»„åˆè½¨é“,ç±»å‹æ˜¯AVMediaTypeAudio
    AVMutableCompositionTrack &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;audioTrack &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio
                                                                        preferredTrackID:kCMPersistentTrackID_Invalid];
    
    //è·å–videoAssetä¸­çš„éŸ³é¢‘è½¨é“,æ’å…¥ç»„åˆè½¨é“
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;audioTrack insertTimeRange:CMTimeRangeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;kCMTimeZero, videoAsset.duration&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
                        ofTrack:[[videoAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:kCMTimeZero error:nil];
    
    NSString &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;outFilePath &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;self fileURLForTempSoundByName:@&lt;span class=&quot;s2&quot;&gt;&quot;MergerSound&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; path];
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self exportAudioAsset:audioTrack.asset toFilePath:outFilePath];
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
- &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;BOOL&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;exportAudioAsset:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;AVAsset &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;avAsset toFilePath:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;NSString &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;filePath &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    AVAssetExportSession &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;exportSession &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVAssetExportSession
                                           exportSessionWithAsset:avAsset
                                           presetName:AVAssetExportPresetAppleM4A];
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;nil &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; exportSession&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return &lt;/span&gt;NO;//åˆ›å»ºå¤±è´¥ï¼Œåˆ™è·³å‡º
    
    exportSession.outputURL &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;NSURL fileURLWithPath:filePath]; // output path æ–°æ–‡ä»¶è·¯å¾„
    exportSession.outputFileType &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; AVFileTypeAppleM4A; // output file &lt;span class=&quot;nb&quot;&gt;type &lt;/span&gt;æ–°æ–‡ä»¶ç±»å‹
    
    __weak __typeof&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;weakSelf &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; self;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;exportSession exportAsynchronouslyWithCompletionHandler:^&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; //block
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;exportSession.status &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; AVAssetExportSessionStatusCompleted&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            dispatch_async&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;dispatch_get_main_queue&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;, ^&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                // 1.æ ¹æ® Main.storyboard çš„å‰ç¼€ &lt;span class=&quot;s2&quot;&gt;&quot;Main&quot;&lt;/span&gt; å–åˆ°storyBoard çš„åœ°å€
                UIStoryboard &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;storyBoard &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;UIStoryboard storyboardWithName:@&lt;span class=&quot;s2&quot;&gt;&quot;Recording&quot;&lt;/span&gt; bundle:[NSBundle mainBundle]];
                // 2.æ ¹æ®äº‹å…ˆåœ¨storyBoardä¸­è®¾ç½®çš„ storyBoard ID æ¥è·å–ç›¸åº”çš„ ViewController
                VideoPlayViewController &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; videoPlay &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;storyBoard instantiateViewControllerWithIdentifier:@&lt;span class=&quot;s2&quot;&gt;&quot;VideoPlayViewController&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;;
                videoPlay.playUrl &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;weakSelf fileURLForTempMovieByName:mergerFileFinally];
                videoPlay.playSoundUrl &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;weakSelf fileURLForTempSoundByName:@&lt;span class=&quot;s2&quot;&gt;&quot;MergerSound&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;;
                &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;weakSelf.navigationController pushViewController:videoPlay animated:YES];
            &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            dispatch_async&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;dispatch_get_main_queue&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;, ^&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                UIAlertView &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;alert &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;UIAlertView alloc] initWithTitle:@&lt;span class=&quot;s2&quot;&gt;&quot;Audio Saved&quot;&lt;/span&gt; message:@&lt;span class=&quot;s2&quot;&gt;&quot;Saved To File Failed&quot;&lt;/span&gt;
                                                               delegate:self cancelButtonTitle:@&lt;span class=&quot;s2&quot;&gt;&quot;OK&quot;&lt;/span&gt; otherButtonTitles:nil];
                &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;alert show];
            &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;;
    &lt;span class=&quot;k&quot;&gt;return &lt;/span&gt;YES;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;4.4.4 è°ƒç”¨åˆæˆè§†é¢‘æ–¹æ³•ï¼š&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// å–ç¬¬1,2æ®µ,è¿›è¡Œè§†é¢‘æ‹¼æ¥,æ‹¼æ¥åå–å‡ºå®Œæ•´éŸ³é¢‘,ä¼ ç•Œé¢
AVAsset &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;firstAsset &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVAsset assetWithURL:_videoArray[0]];
AVAsset &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;secondAsset &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVAsset assetWithURL:_videoArray[1]];
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self mergeAndSaveMovieWithFirstAsset:firstAsset secondAsset:secondAsset];
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;section-7&quot;&gt;äº”ã€è§†é¢‘åŠ æ»¤é•œåŠŸèƒ½&lt;/h1&gt;

&lt;h2 id=&quot;section-8&quot;&gt;5.1 å•ä¸ªæ»¤é•œ&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// ç´ ææ»¤é•œ
GPUImageBrightnessFilter &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;newFilter &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;GPUImageBrightnessFilter alloc] init];
newFilter.brightness &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 0.4f;
self.filter &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; newFilter;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-9&quot;&gt;5.2 ç»„åˆæ»¤é•œ&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GPUImageRGBFilter &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;filter1         &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;GPUImageRGBFilter alloc] init];
GPUImageToonFilter &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;filter2        &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;GPUImageToonFilter alloc] init];
GPUImageColorInvertFilter &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;filter3 &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;GPUImageColorInvertFilter alloc] init];
GPUImageSepiaFilter       &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;filter4 &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;GPUImageSepiaFilter alloc] init];
&lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;GPUImageFilterGroup &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;_filter addFilter:filter1];
&lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;GPUImageFilterGroup &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;_filter addFilter:filter2];
&lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;GPUImageFilterGroup &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;_filter addFilter:filter3];
&lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;GPUImageFilterGroup &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;_filter addFilter:filter4];

&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;filter1 addTarget:filter2];
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;filter2 addTarget:filter3];
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;filter3 addTarget:filter4];
              
&lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;GPUImageFilterGroup &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;_filter setInitialFilters:[NSArray arrayWithObject:filter1]];
&lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;GPUImageFilterGroup &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;_filter setTerminalFilter:filter4];
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-10&quot;&gt;5.3 æ·»åŠ æ»¤é•œ&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// imageMovie
self.movieFile &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;GPUImageMovie alloc] initWithURL:_playUrl];
_movieFile.runBenchmark &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES;
_movieFile.playAtActualSpeed &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; NO;
// æ»¤é•œ
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;_movieFile addTarget:_filter];
// GPUImageView
GPUImageView &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;filterView &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;GPUImageView alloc] init];
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;_filter addTarget:filterView];
     
// MovieWriter
self.movieWriter &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;GPUImageMovieWriter alloc] initWithMovieURL:_currentMovieUrl size:CGSizeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;480.0, 640.0&lt;span class=&quot;o&quot;&gt;)]&lt;/span&gt;;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;_filter addTarget:_movieWriter];
        
_movieWriter.shouldPassthroughAudio &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES;
_movieFile.audioEncodingTarget &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; _movieWriter;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;_movieFile enableSynchronizedEncodingUsingMovieWriter:_movieWriter];

// å¼€å§‹å¤„ç†
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;_movieWriter startRecording];
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;_movieFile startProcessing];

&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.player pause];
 _processing.hidden &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; NO;
 &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;_movieWriter setCompletionBlock:^&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	 &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;_filter removeTarget:_movieWriter];
	 &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;_movieWriter finishRecording];
	 dispatch_async&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;dispatch_get_main_queue&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;, ^&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		 _processing.hidden &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES;
     &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;;
&lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;mv&quot;&gt;å…­ã€è§†é¢‘åŠ MVåŠŸèƒ½&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;ä»£ç æœ‰ç‚¹ä¹±ï¼Œç´¯äº†ï¼Œä¸æƒ³æ•´ç†äº†ï¼Œå¤§å¤šåŒç†å§ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#pragma mark -&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#pragma mark - ğŸmvå¤„ç† 1314&lt;/span&gt;
// åŠ mvå¤„ç†
- &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;void&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;processMovieByMVUrl:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;NSURL &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;mvUrl &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    AVURLAsset &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;firstAsset &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVURLAsset URLAssetWithURL:_playUrl options:nil];
    AVURLAsset &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;secondAsset &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVURLAsset URLAssetWithURL:mvUrl options:nil];
 
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;firstAsset.duration.value !&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondAsset.duration.value !&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        // 1 - Create AVMutableComposition object. This object will hold your AVMutableCompositionTrack instances.
        AVMutableComposition &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;mixComposition &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;AVMutableComposition alloc] init];
        // 2 - Create two video tracks
        AVMutableCompositionTrack &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;firstTrack &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo
                                                                            preferredTrackID:kCMPersistentTrackID_Invalid];
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;firstTrack insertTimeRange:CMTimeRangeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;kCMTimeZero, firstAsset.duration&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
                            ofTrack:[[firstAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0]
                             atTime:kCMTimeZero
                              error:nil];
        AVMutableCompositionTrack &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;secondTrack &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo
                                                                             preferredTrackID:kCMPersistentTrackID_Invalid];
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;secondTrack insertTimeRange:CMTimeRangeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;kCMTimeZero, firstAsset.duration&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
                             ofTrack:[[secondAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0]
                              atTime:kCMTimeZero // ğŸŒ²æ”¹
                               error:nil];
        
        // 2.1 - Create AVMutableVideoCompositionInstruction
        AVMutableVideoCompositionInstruction &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;mainInstruction &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVMutableVideoCompositionInstruction videoCompositionInstruction];
        mainInstruction.timeRange &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CMTimeRangeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;kCMTimeZero,
                                                    firstAsset.duration&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
        
        // 2.2 - Create an AVMutableVideoCompositionLayerInstruction &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;the first track
        AVMutableVideoCompositionLayerInstruction &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;firstlayerInstruction &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:firstTrack];
        AVAssetTrack &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;firstAssetTrack &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;firstAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
        UIImageOrientation firstAssetOrientation_  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; UIImageOrientationUp;
        BOOL isFirstAssetPortrait_  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; NO;
        CGAffineTransform firstTransform &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; firstAssetTrack.preferredTransform;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;firstTransform.a &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.b &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.c &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; -1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.d &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            firstAssetOrientation_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; UIImageOrientationRight;
            isFirstAssetPortrait_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;firstTransform.a &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.b &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; -1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.c &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.d &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            firstAssetOrientation_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  UIImageOrientationLeft;
            isFirstAssetPortrait_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;firstTransform.a &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.b &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.c &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.d &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 1.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            firstAssetOrientation_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  UIImageOrientationUp;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;firstTransform.a &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; -1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.b &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.c &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; firstTransform.d &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; -1.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            firstAssetOrientation_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; UIImageOrientationDown;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;firstlayerInstruction setTransform:firstAsset.preferredTransform atTime:kCMTimeZero];
       
        // 2.3 - Create an AVMutableVideoCompositionLayerInstruction &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;the second track
        AVMutableVideoCompositionLayerInstruction &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;secondlayerInstruction &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:secondTrack];
        AVAssetTrack &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;secondAssetTrack &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;secondAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

        UIImageOrientation secondAssetOrientation_  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; UIImageOrientationUp;
        BOOL isSecondAssetPortrait_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; NO;
        CGAffineTransform secondTransform &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; secondAssetTrack.preferredTransform;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;secondTransform.a &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.b &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.c &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; -1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.d &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nv&quot;&gt;secondAssetOrientation_&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; UIImageOrientationRight;
            isSecondAssetPortrait_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;secondTransform.a &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.b &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; -1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.c &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.d &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            secondAssetOrientation_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  UIImageOrientationLeft;
            isSecondAssetPortrait_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;secondTransform.a &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.b &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.c &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.d &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 1.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            secondAssetOrientation_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  UIImageOrientationUp;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;secondTransform.a &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; -1.0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.b &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.c &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; secondTransform.d &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; -1.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            secondAssetOrientation_ &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; UIImageOrientationDown;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
//        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;secondlayerInstruction setTransform:secondAsset.preferredTransform atTime:firstAsset.duration];
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;secondlayerInstruction setTransform:secondAsset.preferredTransform atTime:kCMTimeZero];
        
        // 2.4 - Add instructions
        mainInstruction.layerInstructions &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;NSArray arrayWithObjects:firstlayerInstruction, secondlayerInstruction,nil];
        AVMutableVideoComposition &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;mainCompositionInst &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVMutableVideoComposition videoComposition];
        mainCompositionInst.instructions &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;NSArray arrayWithObject:mainInstruction];
        mainCompositionInst.frameDuration &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CMTimeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1, firstAsset.duration.value/firstAsset.duration.timescale&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
        
        CGSize naturalSizeFirst, naturalSizeSecond;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;isFirstAssetPortrait_&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            naturalSizeFirst &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CGSizeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;firstAssetTrack.naturalSize.height, firstAssetTrack.naturalSize.width&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            naturalSizeFirst &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; firstAssetTrack.naturalSize;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;isSecondAssetPortrait_&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            naturalSizeSecond &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CGSizeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;secondAssetTrack.naturalSize.height, secondAssetTrack.naturalSize.width&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            naturalSizeSecond &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; secondAssetTrack.naturalSize;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        
        float renderWidth, renderHeight;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;naturalSizeFirst.width &amp;gt; naturalSizeSecond.width&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            renderWidth &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; naturalSizeFirst.width;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            renderWidth &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; naturalSizeSecond.width;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;naturalSizeFirst.height &amp;gt; naturalSizeSecond.height&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            renderHeight &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; naturalSizeFirst.height;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            renderHeight &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; naturalSizeSecond.height;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
//        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;secondAsset increaseSize:[NSValue valueWithCGSize:CGSizeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;480, 640&lt;span class=&quot;o&quot;&gt;)]]&lt;/span&gt;;
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;firstlayerInstruction setOpacity:0.5 atTime:kCMTimeZero]; //r34645ğŸ
//        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;secondlayerInstruction setOpacity:0.5 atTime:kCMTimeZero]; //r34645ğŸ
        
        // 480, 640
        CGFloat result &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; renderWidth &amp;lt; renderHeight ? renderWidth : renderHeight;
        mainCompositionInst.renderSize &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CGSizeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;result, result&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;

        // 3 - Audio track
        AVAsset &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;audioAsset &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVAsset assetWithURL:_currentSoundUrl];
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;audioAsset!&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;nil&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            AVMutableCompositionTrack &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;AudioTrack &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
            &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AudioTrack insertTimeRange:CMTimeRangeMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;kCMTimeZero, firstAsset.duration&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:kCMTimeZero error:nil];
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        
        // 4 - Get path
        NSURL &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;url &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self fileURLForFilterMovieByName:mvFile];
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self removeFile:url];
        mvFile ++;
        // 5 - Create exporter
        AVAssetExportSession &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;exporter &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;AVAssetExportSession alloc] initWithAsset:mixComposition
                                                                          presetName:AVAssetExportPresetHighestQuality];
        exporter.outputURL&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;url;
        exporter.outputFileType &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; AVFileTypeQuickTimeMovie;
        exporter.shouldOptimizeForNetworkUse &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES;
        exporter.videoComposition &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; mainCompositionInst; // åŠ 
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;exporter exportAsynchronouslyWithCompletionHandler:^&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            dispatch_async&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;dispatch_get_main_queue&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;, ^&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self exportDidFinish:exporter];
            &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;;
        &lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;section-11&quot;&gt;ä¸ƒã€å­¦ä¹ &lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.jianshu.com/p/722d65bac58d&quot;&gt;GPUImageè¯¦ç»†è§£æï¼ˆå…­ï¼‰-ç”¨è§†é¢‘åšè§†é¢‘æ°´å°&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.csdn.net/xiaolinyeyi/article/details/50878996&quot;&gt;AVAssetã€AVMutableCompositionç³»åˆ—ç±»çš„ç†è§£åŠè§†é¢‘è£å‰ªç¤ºä¾‹
&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.csdn.net/merrygoot/article/details/51804906&quot;&gt;iOS GPUImageä¹‹GPUImageFilterGroupç»„åˆæ»¤é•œï¼ˆ5ï¼‰&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.tuicool.com/articles/FVnumu&quot;&gt;AVFoundationå’ŒGPUImageåˆæ¢&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.csdn.net/think_ma/article/details/43093331&quot;&gt;GPUImage.hç®€å•è¯´æ˜&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Sat, 18 Mar 2017 01:43:12 +0800</pubDate>
        <link>http://localhost:4000/2017/03/18/GPUImage%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/03/18/GPUImage%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/</guid>
        
        <category>Object-C</category>
        
        
        <category>æŠ€æœ¯</category>
        
      </item>
    
      <item>
        <title>äºŒç»´ç çš„è¯†åˆ«ä¸ç”Ÿæˆ</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#iossdk&quot; id=&quot;markdown-toc-iossdk&quot;&gt;ä¸€ã€iOSåŸç”ŸSDKè¯†åˆ«å›¾ç‰‡ä¸­çš„äºŒç»´ç &lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#section&quot; id=&quot;markdown-toc-section&quot;&gt;1.1 è¯†åˆ«äºŒç»´ç çš„æ–¹æ³•æ¯”è¾ƒ&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#avfoundation&quot; id=&quot;markdown-toc-avfoundation&quot;&gt;1.2 AVFoundationåŸºæœ¬çŸ¥è¯†ç‚¹&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#avfoundation-1&quot; id=&quot;markdown-toc-avfoundation-1&quot;&gt;1.3 ç”¨AVFoundationè¯†åˆ«äºŒç»´ç å®ç°&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#section-1&quot; id=&quot;markdown-toc-section-1&quot;&gt;äºŒã€ç”ŸæˆäºŒç»´ç &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;iossdk&quot;&gt;ä¸€ã€iOSåŸç”ŸSDKè¯†åˆ«å›¾ç‰‡ä¸­çš„äºŒç»´ç &lt;/h1&gt;

&lt;h2 id=&quot;section&quot;&gt;1.1 è¯†åˆ«äºŒç»´ç çš„æ–¹æ³•æ¯”è¾ƒ&lt;/h2&gt;

&lt;p&gt;åœ¨iOSä¸­å®ç°äºŒç»´ç å’Œæ¡å½¢ç æ‰«æï¼Œæˆ‘ä»¬æ‰€çŸ¥çš„æœ‰ï¼Œä¸¤å¤§å¼€æºç»„ä»¶ZBarä¸ZXing. è¿™ä¸¤å¤§ç»„ä»¶æˆ‘ä»¬éƒ½æœ‰ç”¨è¿‡ï¼Œè¿™é‡Œæ€»ç»“ä¸‹å„è‡ªçš„ç¼ºç‚¹ï¼š
- &lt;strong&gt;ZBar&lt;/strong&gt;
ZBaråœ¨æ‰«æçš„çµæ•åº¦ä¸Šï¼Œå’Œå†…å­˜çš„ä½¿ç”¨ä¸Šç›¸å¯¹äºZXingä¸Šéƒ½æ˜¯è¾ƒä¼˜çš„ï¼Œä½†æ˜¯å¯¹äº â€œåœ†è§’äºŒç»´ç â€ çš„æ‰«æç¡®å¾ˆå›°éš¾ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ZXing&lt;/strong&gt;
ZXing æ˜¯ Google Codeä¸Šçš„ä¸€ä¸ªå¼€æºçš„æ¡å½¢ç æ‰«æåº“ï¼Œæ˜¯ç”¨javaè®¾è®¡çš„ï¼Œè¿Google Glass éƒ½åœ¨ä½¿ç”¨çš„ã€‚ä½†æœ‰äººä¸ºäº†è¿½æ±‚æ›´é«˜æ•ˆç‡ä»¥åŠå¯ç§»æ¤æ€§ï¼Œå‡ºç°äº†c++ port. Githubä¸Šçš„Objectivc-C portï¼Œå…¶å®å°±æ˜¯ç”¨OCä»£ç å°è£…äº†ä¸€ä¸‹è€Œå·²ï¼Œè€Œä¸”å·²ç»åœæ­¢ç»´æŠ¤ã€‚è¿™æ ·æ•ˆç‡éå¸¸ä½ï¼Œåœ¨instrumentä¸‹é¢å¯ä»¥çœ‹åˆ°CPUå’Œå†…å­˜ç–¯æ¶¨ï¼Œåœ¨å†…å­˜å°çš„æœºå™¨ä¸Šå¾ˆå®¹æ˜“å´©æºƒã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;AVFoundation&lt;/strong&gt;
AVFoundationæ— è®ºåœ¨æ‰«æçµæ•åº¦å’Œæ€§èƒ½ä¸Šæ¥è¯´éƒ½æ˜¯æœ€ä¼˜çš„ï¼Œæ‰€ä»¥æ¯«æ— ç–‘é—®æˆ‘ä»¬åº”è¯¥åˆ‡æ¢åˆ°AVFoundationï¼Œéœ€è¦å…¼å®¹iOS 7æˆ–ä¹‹å‰çš„ç‰ˆæœ¬å¯ä»¥ç”¨zbaræˆ–zxingä»£æ›¿ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;avfoundation&quot;&gt;1.2 AVFoundationåŸºæœ¬çŸ¥è¯†ç‚¹&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;AVCaptureDeviceå¿…é¡»è¦å¼•å…¥AVFoundation.frameworkã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;è‹¥æ˜¯è¦æ£€æµ‹è£…ç½®æ˜¯å¦æä¾›è¯¥åŠŸèƒ½ï¼Œå¯ä»¥é€è¿‡ä¸‹é¢æ–¹æ³•æ¥å–å¾—ï¼š&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   -&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;BOOL&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;hasMediaType:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;NSString &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;mediaType
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;å–å¾—æ‘„åƒå¤´åï¼Œæˆ‘ä»¬å¯ä»¥é€è¿‡ä¸‹é¢å±æ€§æ¥åˆ¤æ–­è¯¥æ‘„åƒå¤´æ˜¯å¦æœ‰æä¾›é—ªå…‰ç¯ï¼š&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
property&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;nonatomic, &lt;span class=&quot;nb&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; BOOL hasTorchï¼›
property&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;nonatomic, &lt;span class=&quot;nb&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; BOOL hasFlashï¼›

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;é—ªå…‰ç¯æ¨¡å¼ï¼šä½¿ç”¨Torch Modeã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ç›¸æœºè®¾å¤‡åœ¨æ”¹å˜æŸäº›å‚æ•°å‰å¿…é¡»å…ˆé”å®šï¼Œç›´åˆ°æ”¹å˜ç»“æŸæ‰èƒ½è§£é”:&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;lockForConfigurationè·ŸunlockForConfigurationæ˜¯é…å¯¹çš„APIã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;avfoundation-1&quot;&gt;1.3 ç”¨AVFoundationè¯†åˆ«äºŒç»´ç å®ç°&lt;/h2&gt;

&lt;p&gt;å…ˆä¿ç•™ç€ï¼š&lt;a href=&quot;https://blog.cnbluebox.com/blog/2014/08/26/ioser-wei-ma-sao-miao/&quot;&gt;iOSäºŒç»´ç æ‰«æ,ä½ éœ€è¦æ³¨æ„çš„ä¸¤ä»¶äº‹&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    //1.è·å–é€‰æ‹©çš„å›¾ç‰‡
    UIImage &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;image &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; info[UIImagePickerControllerOriginalImage];
    //2.åˆå§‹åŒ–ä¸€ä¸ªç›‘æµ‹å™¨
    CIDetector&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;detector &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;CIDetector detectorOfType:CIDetectorTypeQRCode context:nil options:@&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; CIDetectorAccuracy : CIDetectorAccuracyHigh &lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;;
    
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;picker dismissViewControllerAnimated:YES completion:^&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        //ç›‘æµ‹åˆ°çš„ç»“æœæ•°ç»„
        NSArray &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;features &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;detector featuresInImage:[CIImage imageWithCGImage:image.CGImage]];
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;features.count &amp;gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            /&lt;span class=&quot;k&quot;&gt;**&lt;/span&gt;ç»“æœå¯¹è±¡ &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;/
            CIQRCodeFeature &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;feature &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;features objectAtIndex:0];
            NSString &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;scannedResult &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; feature.messageString;
            UIAlertView &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; alertView &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;UIAlertView alloc]initWithTitle:@&lt;span class=&quot;s2&quot;&gt;&quot;æ‰«æç»“æœ&quot;&lt;/span&gt; message:scannedResult delegate:nil cancelButtonTitle:@&lt;span class=&quot;s2&quot;&gt;&quot;ç¡®å®š&quot;&lt;/span&gt; otherButtonTitles:nil, nil];
            &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;alertView show];
          
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            UIAlertView &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; alertView &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;UIAlertView alloc]initWithTitle:@&lt;span class=&quot;s2&quot;&gt;&quot;æç¤º&quot;&lt;/span&gt; message:@&lt;span class=&quot;s2&quot;&gt;&quot;è¯¥å›¾ç‰‡æ²¡æœ‰åŒ…å«ä¸€ä¸ªäºŒç»´ç ï¼&quot;&lt;/span&gt; delegate:nil cancelButtonTitle:@&lt;span class=&quot;s2&quot;&gt;&quot;ç¡®å®š&quot;&lt;/span&gt; otherButtonTitles:nil, nil];
            &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;alertView show];
            
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;section-1&quot;&gt;äºŒã€ç”ŸæˆäºŒç»´ç &lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;ol&gt;
      &lt;li&gt;å¯¼å…¥CoreImageæ¡†æ¶ï¼š&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#import &amp;lt;CoreImage/CoreImage.h&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;ol&gt;
      &lt;li&gt;é€šè¿‡æ»¤é•œCIFilterç”ŸæˆäºŒç»´ç ï¼š&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/&lt;span class=&quot;k&quot;&gt;**&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;  ç”ŸæˆäºŒç»´ç 
 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;/
- &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;void&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;creatCIQRCodeImage
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    // 1.åˆ›å»ºè¿‡æ»¤å™¨ï¼Œè¿™é‡Œçš„@&lt;span class=&quot;s2&quot;&gt;&quot;CIQRCodeGenerator&quot;&lt;/span&gt;æ˜¯å›ºå®šçš„
    CIFilter &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;filter &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;CIFilter filterWithName:@&lt;span class=&quot;s2&quot;&gt;&quot;CIQRCodeGenerator&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;;

    // 2.æ¢å¤é»˜è®¤è®¾ç½®
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;filter setDefaults];

    // 3. ç»™è¿‡æ»¤å™¨æ·»åŠ æ•°æ®
    NSString &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;dataString &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; @&lt;span class=&quot;s2&quot;&gt;&quot;äºŒç»´ç æµ‹è¯•æ•°æ®&quot;&lt;/span&gt;;
    NSData &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;data &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;dataString dataUsingEncoding:NSUTF8StringEncoding];
    // æ³¨æ„ï¼Œè¿™é‡Œçš„valueå¿…é¡»æ˜¯NSDataç±»å‹
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;filter setValue:data forKeyPath:@&lt;span class=&quot;s2&quot;&gt;&quot;inputMessage&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;;

    // 4. ç”ŸæˆäºŒç»´ç 
    CIImage &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;outputImage &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;filter outputImage];

    // 5. æ˜¾ç¤ºäºŒç»´ç 
    self.imageView.image &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;UIImage imageWithCIImage:outputImage];
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;é€šè¿‡ä¸Šè¿°æ–¹æ³•ç”Ÿæˆçš„äºŒç»´ç å›¾ç‰‡æ¯”è¾ƒæ¨¡ç³Šï¼Œç¬¬5æ­¥æ˜¾ç¤ºäºŒç»´ç çš„æ—¶å€™å¯ä»¥è°ƒç”¨ä»¥ä¸‹æ–¹æ³•ç”Ÿæˆæ¯”è¾ƒæ¸…æ™°çš„äºŒç»´ç ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/&lt;span class=&quot;k&quot;&gt;**&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;  æ ¹æ®CIImageç”ŸæˆæŒ‡å®šå¤§å°çš„UIImage
 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;  @param image CIImage
 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;  @param size  å›¾ç‰‡å®½åº¦
 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;  @return ç”Ÿæˆé«˜æ¸…çš„UIImage
 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;/
- &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;UIImage &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;creatNonInterpolatedUIImageFormCIImage:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;CIImage &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;image withSize:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;CGFloat&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;size
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    CGRect extent &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CGRectIntegral&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;image.extent&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
    CGFloat scale &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; MIN&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;size/CGRectGetWidth&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;extent&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, size/CGRectGetHeight&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;extent&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt;;

    // 1. åˆ›å»ºbitmap
    size_t width &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CGRectGetWidth&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;extent&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; scale;
    size_t height &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CGRectGetHeight&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;extent&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; scale;
    CGColorSpaceRef cs &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CGColorSpaceCreateDeviceGray&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;;
    CGContextRef bitmapRef &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CGBitmapContextCreate&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;nil, width, height, 8, 0, cs, &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;CGBitmapInfo&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;kCGImageAlphaNone&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
    CIContext &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;context &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;CIContext contextWithOptions:nil];
    CGImageRef bitmapImage &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;context createCGImage:image fromRect:extent];
    CGContextSetInterpolationQuality&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;bitmapRef, kCGInterpolationNone&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
    CGContextScaleCTM&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;bitmapRef, scale, scale&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
    CGContextDrawImage&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;bitmapRef, extent, bitmapImage&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;

    // 2.ä¿å­˜bitmapå›¾ç‰‡
    CGImageRef scaledImage &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CGBitmapContextCreateImage&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;bitmapRef&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
    CGContextRelease&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;bitmapRef&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
    CGImageRelease&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;bitmapImage&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;UIImage imageWithCGImage:scaledImage];
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Tue, 07 Mar 2017 18:25:43 +0800</pubDate>
        <link>http://localhost:4000/2017/03/07/%E4%BA%8C%E7%BB%B4%E7%A0%81%E7%9A%84%E8%AF%86%E5%88%AB%E4%B8%8E%E7%94%9F%E6%88%90/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/03/07/%E4%BA%8C%E7%BB%B4%E7%A0%81%E7%9A%84%E8%AF%86%E5%88%AB%E4%B8%8E%E7%94%9F%E6%88%90/</guid>
        
        <category>Object-C</category>
        
        
        <category>æŠ€æœ¯</category>
        
      </item>
    
      <item>
        <title>iOSåŠ¨ç”»ç¬”è®°</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#uiviewanimationoptions&quot; id=&quot;markdown-toc-uiviewanimationoptions&quot;&gt;ä¸€ã€UIViewAnimationOptionsæšä¸¾&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#coreanimation&quot; id=&quot;markdown-toc-coreanimation&quot;&gt;äºŒã€CoreAnimation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;uiviewanimationoptions&quot;&gt;ä¸€ã€UIViewAnimationOptionsæšä¸¾&lt;/h1&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
enum &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   //è¿™éƒ¨åˆ†æ˜¯åŸºç¡€å±æ€§çš„è®¾ç½®
   UIViewAnimationOptionLayoutSubviews            &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1 &lt;span class=&quot;sh&quot;&gt;&amp;lt;&amp;lt;  0,//è®¾ç½®å­è§†å›¾éšçˆ¶è§†å›¾å±•ç¤ºåŠ¨ç”»
   UIViewAnimationOptionAllowUserInteraction      = 1 &amp;lt;&amp;lt;  1,//å…è®¸åœ¨åŠ¨ç”»æ‰§è¡Œæ—¶ç”¨æˆ·ä¸å…¶è¿›è¡Œäº¤äº’
   UIViewAnimationOptionBeginFromCurrentState     = 1 &amp;lt;&amp;lt;  2,//å…è®¸åœ¨åŠ¨ç”»æ‰§è¡Œæ—¶æ‰§è¡Œæ–°çš„åŠ¨ç”»
   UIViewAnimationOptionRepeat                    = 1 &amp;lt;&amp;lt;  3,//è®¾ç½®åŠ¨ç”»å¾ªç¯æ‰§è¡Œ
   UIViewAnimationOptionAutoreverse               = 1 &amp;lt;&amp;lt;  4,//è®¾ç½®åŠ¨ç”»åå‘æ‰§è¡Œï¼Œå¿…é¡»å’Œé‡å¤æ‰§è¡Œä¸€èµ·ä½¿ç”¨
   UIViewAnimationOptionOverrideInheritedDuration = 1 &amp;lt;&amp;lt;  5,//å¼ºåˆ¶åŠ¨ç”»ä½¿ç”¨å†…å±‚åŠ¨ç”»çš„æ—¶é—´å€¼
   UIViewAnimationOptionOverrideInheritedCurve    = 1 &amp;lt;&amp;lt;  6,//å¼ºåˆ¶åŠ¨ç”»ä½¿ç”¨å†…å±‚åŠ¨ç”»æ›²çº¿å€¼
   UIViewAnimationOptionAllowAnimatedContent      = 1 &amp;lt;&amp;lt;  7,//è®¾ç½®åŠ¨ç”»è§†å›¾å®æ—¶åˆ·æ–°
   UIViewAnimationOptionShowHideTransitionViews   = 1 &amp;lt;&amp;lt;  8,//è®¾ç½®è§†å›¾åˆ‡æ¢æ—¶éšè—ï¼Œè€Œä¸æ˜¯ç§»é™¤
   UIViewAnimationOptionOverrideInheritedOptions  = 1 &amp;lt;&amp;lt;  9,//
   //è¿™éƒ¨åˆ†å±æ€§è®¾ç½®åŠ¨ç”»æ’­æ”¾çš„çº¿æ€§æ•ˆæœ
   UIViewAnimationOptionCurveEaseInOut            = 0 &amp;lt;&amp;lt; 16,//æ·¡å…¥æ·¡å‡º é¦–æœ«å‡é€Ÿ
   UIViewAnimationOptionCurveEaseIn               = 1 &amp;lt;&amp;lt; 16,//æ·¡å…¥ åˆå§‹å‡é€Ÿ
   UIViewAnimationOptionCurveEaseOut              = 2 &amp;lt;&amp;lt; 16,//æ·¡å‡º æœ«å°¾å‡é€Ÿ
   UIViewAnimationOptionCurveLinear               = 3 &amp;lt;&amp;lt; 16,//çº¿æ€§ åŒ€é€Ÿæ‰§è¡Œ   
   //è¿™éƒ¨åˆ†è®¾ç½®UIViewåˆ‡æ¢æ•ˆæœ
   UIViewAnimationOptionTransitionNone            = 0 &amp;lt;&amp;lt; 20,
   UIViewAnimationOptionTransitionFlipFromLeft    = 1 &amp;lt;&amp;lt; 20,//ä»å·¦è¾¹åˆ‡å…¥
   UIViewAnimationOptionTransitionFlipFromRight   = 2 &amp;lt;&amp;lt; 20,//ä»å³è¾¹åˆ‡å…¥
   UIViewAnimationOptionTransitionCurlUp          = 3 &amp;lt;&amp;lt; 20,//ä»ä¸Šé¢ç«‹ä½“è¿›å…¥
   UIViewAnimationOptionTransitionCurlDown        = 4 &amp;lt;&amp;lt; 20,//ä»ä¸‹é¢ç«‹ä½“è¿›å…¥
   UIViewAnimationOptionTransitionCrossDissolve   = 5 &amp;lt;&amp;lt; 20,//æº¶è§£æ•ˆæœ
   UIViewAnimationOptionTransitionFlipFromTop     = 6 &amp;lt;&amp;lt; 20,//ä»ä¸Šé¢åˆ‡å…¥
   UIViewAnimationOptionTransitionFlipFromBottom  = 7 &amp;lt;&amp;lt; 20,//ä»ä¸‹é¢åˆ‡å…¥
};

&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æç¤ºï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;å±æ€§å¯ä»¥ä½¿ç”¨ï¼ˆShift+\ï¼‰(PSï¼šå› ä¸ºæ ¼å¼é—®é¢˜è¾“ä¸å‡ºæ¥å°±è¿™æ ·å†™äº†)è¿›è¡Œå¤šé¡¹åˆå¹¶ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;è¿™ç±»çš„åŠ¨ç”»å¯ä»¥è¿›è¡ŒåµŒå¥—ï¼Œå…¶ä¸­æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå†…å±‚åŠ¨ç”»çš„æ‰§è¡Œæ—¶é—´å’Œæ›²çº¿æ¨¡å¼ä¼šé»˜è®¤ç»§æ‰¿å¤–å±‚åŠ¨çš„ï¼Œè‹¥è¦å¼ºåˆ¶ä½¿ç”¨æ–°çš„å‚æ•°ï¼Œä½¿ç”¨å¦‚ä¸‹çš„ä¸¤ä¸ªå‚æ•°ï¼š&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
UIViewAnimationOptionOverrideInheritedDuration &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1 &lt;span class=&quot;sh&quot;&gt;&amp;lt;&amp;lt;  5,//å¼ºåˆ¶åŠ¨ç”»ä½¿ç”¨å†…å±‚åŠ¨ç”»çš„æ—¶é—´å€¼

UIViewAnimationOptionOverrideInheritedCurve    = 1 &amp;lt;&amp;lt;  6,//å¼ºåˆ¶åŠ¨ç”»ä½¿ç”¨å†…å±‚åŠ¨ç”»æ›²çº¿å€¼
   
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;coreanimation&quot;&gt;äºŒã€CoreAnimation&lt;/h1&gt;

&lt;p&gt;&lt;img src=&quot;/source/iOSåŠ¨ç”»ç¬”è®°/01.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ¥å—çš„ç±»å‹æ˜¯ CAAnimation ç±»å‹ï¼Œæœ‰ä¸‹é¢è¿™äº›å­ç±»ï¼š&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;CABasicAnimation&lt;/strong&gt;ï¼šå¯è®¾å®šèµ·å§‹ç»“æŸä¸¤ä¸ªå…³é”®å¸§çš„ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;CAKeyframeAnimation&lt;/strong&gt;ï¼šé™¤é¦–å°¾å¤–ï¼Œè¿˜å¯æ·»åŠ å¤šä¸ªä¸­é—´å…³é”®ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;**CAAnimationGroup **ï¼šå¯ç»„åˆå¤šä¸ªåŠ¨ç”»ï¼Œå› ä¸ºä¸Šé¢ä¸¤ç§åŠ¨ç”»ä¸€æ¬¡åªèƒ½è®¾ç½®ä¸€ä¸ªå±æ€§å€¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;CATransition&lt;/strong&gt;ï¼šå›¾å±‚è¿‡æ¸¡åŠ¨ç”»ï¼Œé»˜è®¤æ˜¯æ·¡å…¥ã€‚æ¯”å¦‚ä¿®æ”¹ä¸€ä¸ª CALayerçš„èƒŒæ™¯è‰²æ—¶ï¼Œæ˜¯ä»åˆå§‹è‰²æ…¢æ…¢æ·¡å…¥è¿‡æ¸¡åˆ°ç»“æŸè‰²ã€‚&lt;/p&gt;

&lt;p&gt;å¯ä¿®æ”¹ä¸ºæ–°é¢œè‰²æŠŠæ—§é¢œè‰²é¡¶å‡ºå»ç­‰æ•ˆæœã€‚è¿˜å¯ä½¿ç”¨ CIFilter æ»¤é•œåšè¿‡æ¸¡æ•ˆæœï¼Œä¸€äº›å¼€æº UIViewController çš„è¿‡æ¸¡åŠ¨ç”»ä½¿ç”¨äº†è¿™ç§æ–¹å¼ã€‚&lt;/p&gt;

</description>
        <pubDate>Sun, 22 Jan 2017 15:44:12 +0800</pubDate>
        <link>http://localhost:4000/2017/01/22/iOS%E5%8A%A8%E7%94%BB%E7%AC%94%E8%AE%B0/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/01/22/iOS%E5%8A%A8%E7%94%BB%E7%AC%94%E8%AE%B0/</guid>
        
        <category>Object-C</category>
        
        
        <category>æŠ€æœ¯</category>
        
      </item>
    
      <item>
        <title>å¦‚ä½•ä½¿ç”¨æˆ‘çš„åšå®¢ä½œä¸ºJekyllæ¨¡ç‰ˆ</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#section&quot; id=&quot;markdown-toc-section&quot;&gt;è‡´è°¢&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#section-1&quot; id=&quot;markdown-toc-section-1&quot;&gt;ä½¿ç”¨&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#section-2&quot; id=&quot;markdown-toc-section-2&quot;&gt;ä¸‹è½½&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#section-3&quot; id=&quot;markdown-toc-section-3&quot;&gt;é…ç½®&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#section-4&quot; id=&quot;markdown-toc-section-4&quot;&gt;å¦‚ä½•å†™æ–‡ç« &lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#section-5&quot; id=&quot;markdown-toc-section-5&quot;&gt;æ‰§è¡Œ&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#section-6&quot; id=&quot;markdown-toc-section-6&quot;&gt;æ•ˆæœ&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#section-7&quot; id=&quot;markdown-toc-section-7&quot;&gt;å…³äºé‡å¤é€ è½®å­&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#section-8&quot; id=&quot;markdown-toc-section-8&quot;&gt;å…³äºä½œè€…&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;section&quot;&gt;è‡´è°¢&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;æ„Ÿè°¢&lt;a href=&quot;https://github.com/&quot;&gt;Github&lt;/a&gt;æä¾›çš„ä»£ç ç»´æŠ¤å’Œå‘å¸ƒå¹³å°ã€‚&lt;/li&gt;
  &lt;li&gt;æ„Ÿè°¢&lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt;å›¢é˜Ÿåšå‡ºå¦‚æ­¤ä¼˜ç§€çš„äº§å“&lt;/li&gt;
  &lt;li&gt;æ„Ÿè°¢åŸä½œè€…&lt;a href=&quot;https://github.com/luoyan35714/LessOrMore&quot;&gt;Freud Kang&lt;/a&gt;ï¼Œä»&lt;code class=&quot;highlighter-rouge&quot;&gt;2016.11&lt;/code&gt;èµ·ï¼Œæˆ‘çš„åšå®¢é€‰ç”¨äº†æ­¤æ ·å¼æ¨¡ç‰ˆã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;section-1&quot;&gt;ä½¿ç”¨&lt;/h1&gt;

&lt;h2 id=&quot;section-2&quot;&gt;ä¸‹è½½&lt;/h2&gt;

&lt;p&gt;ä½¿ç”¨gitä»&lt;a href=&quot;https://github.com/LuckyCat7848/LuckyCat7848.github.io&quot;&gt;LessOrMore&lt;/a&gt;ä¸»é¡µä¸‹è½½é¡¹ç›®&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/LuckyCat7848/LuckyCat7848.github.io.git
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-3&quot;&gt;é…ç½®&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;ä¸‹è½½ä¸‹æ¥åéœ€è¦é…ç½®çš„æ–‡ä»¶&lt;code class=&quot;highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt;ï¼Œæ‰“å¼€ä¹‹åæŒ‰ç…§å¦‚ä¸‹è¿›è¡Œé…ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;ç‰¹åˆ«æ³¨æ„&lt;code class=&quot;highlighter-rouge&quot;&gt;baseurl&lt;/code&gt;çš„é…ç½®ã€‚å¦‚æœæ˜¯&lt;code class=&quot;highlighter-rouge&quot;&gt;***.github.io&lt;/code&gt;é¡¹ç›®ï¼Œä¸ä¿®æ”¹ä¸ºç©ºâ€™â€˜çš„è¯ï¼Œä¼šå¯¼è‡´JS,CSSç­‰é™æ€èµ„æºæ— æ³•æ‰¾åˆ°çš„é”™è¯¯&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;name: åšå®¢åç§°
email: é‚®ç®±åœ°å€
author: ä½œè€…å
url: ä¸ªäººç½‘ç«™
&lt;span class=&quot;c&quot;&gt;### baseurlä¿®æ”¹ä¸ºé¡¹ç›®åï¼Œå¦‚æœé¡¹ç›®æ˜¯'***.github.io'ï¼Œåˆ™è®¾ç½®ä¸ºç©º''&lt;/span&gt;
baseurl: &lt;span class=&quot;s2&quot;&gt;&quot;/LessOrMore&quot;&lt;/span&gt;
resume_site: ä¸ªäººç®€å†ç½‘ç«™
github: githubåœ°å€
github_username: githubç”¨æˆ·åç§°

markdown: kramdown
kramdown:
  input: GFM
  toc_levels: 1..6
  enable_coderay: &lt;span class=&quot;nb&quot;&gt;true
  &lt;/span&gt;syntax_highlighter: rouge
  
FB:
  comments :
    provider : uyan 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;å› ä¸ºæˆ‘çš„åšå®¢ä½¿ç”¨çš„æ˜¯&lt;a href=&quot;http://www.uyan.cc/&quot;&gt;å‹è¨€&lt;/a&gt;å®ç°è¯„è®ºåŠŸèƒ½ï¼Œæ‰€ä»¥è¦åœ¨&lt;code class=&quot;highlighter-rouge&quot;&gt;/_includes/LessOrMore/comments-providers/uyan&lt;/code&gt;æ–‡ä»¶ä¸­æŠŠå‹è¨€çš„ç”¨æˆ·idæ”¹æˆä½ æ³¨å†Œå‹è¨€çš„è´¦å·idã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-4&quot;&gt;å¦‚ä½•å†™æ–‡ç« &lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/_posts/&lt;/code&gt;ç›®å½•ä¸‹æ˜¯æ‰€æœ‰å‘å¸ƒçš„åšå®¢æ–‡ä»¶å¤¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/source/&lt;/code&gt;ç›®å½•ä¸‹æ˜¯æ‰€æœ‰å‘å¸ƒçš„åšå®¢çš„èµ„æºæ–‡ä»¶ï¼Œå¦‚åšå®¢ä¸­ç”¨åˆ°çš„å›¾ç‰‡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;åœ¨&lt;code class=&quot;highlighter-rouge&quot;&gt;/_posts/&lt;/code&gt;ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥åˆ›å»ºæ–‡ä»¶å¤¹å¹¶åœ¨æ–‡ä»¶å¤¹ä¸­æ·»åŠ æ–‡ä»¶ï¼Œæ–¹ä¾¿ç»´æŠ¤ã€‚åœ¨æ–°å»ºæ–‡ä»¶ä¸­ç²˜è´´å¦‚ä¸‹ä¿¡æ¯ï¼Œå¹¶ä¿®æ”¹ä»¥ä¸‹çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;titile&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;date&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;categories&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;tag&lt;/code&gt;çš„ç›¸å…³ä¿¡æ¯ï¼Œæ·»åŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;* content {:toc}&lt;/code&gt;ä¸ºç›®å½•ç›¸å…³ä¿¡æ¯ï¼Œåœ¨è¿›è¡Œæ­£æ–‡ä¹¦å†™å‰éœ€è¦åœ¨ç›®å½•å’Œæ­£æ–‡ä¹‹é—´è¾“å…¥è‡³å°‘2è¡Œç©ºè¡Œã€‚ç„¶åæŒ‰ç…§æ­£å¸¸çš„Markdownè¯­æ³•ä¹¦å†™æ­£æ–‡ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;---
layout: post
&lt;span class=&quot;c&quot;&gt;#æ ‡é¢˜é…ç½®&lt;/span&gt;
title:  æ ‡é¢˜
&lt;span class=&quot;c&quot;&gt;#æ—¶é—´é…ç½®&lt;/span&gt;
date:   2016-08-27 01:08:00 +0800
&lt;span class=&quot;c&quot;&gt;#å¤§ç±»é…ç½®&lt;/span&gt;
categories: document
&lt;span class=&quot;c&quot;&gt;#å°ç±»é…ç½®&lt;/span&gt;
tag: æ•™ç¨‹
---

&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; content
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;:toc&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;


æˆ‘æ˜¯æ­£æ–‡ã€‚æˆ‘æ˜¯æ­£æ–‡ã€‚æˆ‘æ˜¯æ­£æ–‡ã€‚æˆ‘æ˜¯æ­£æ–‡ã€‚æˆ‘æ˜¯æ­£æ–‡ã€‚æˆ‘æ˜¯æ­£æ–‡ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-5&quot;&gt;æ‰§è¡Œ&lt;/h2&gt;

&lt;p&gt;åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä¸‹åˆ—å‘½ä»¤ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;jekyll server
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-6&quot;&gt;æ•ˆæœ&lt;/h2&gt;
&lt;p&gt;æ‰“å¼€æµè§ˆå™¨å¹¶è¾“å…¥URL&lt;code class=&quot;highlighter-rouge&quot;&gt;http://localhost:4000/&lt;/code&gt;ï¼Œå›è½¦ï¼Œå³å¯çœ‹åˆ°åšå®¢è¿è¡Œæ•ˆæœã€‚&lt;/p&gt;

&lt;p&gt;è¿™åªæ˜¯æœ¬åœ°æŸ¥çœ‹çš„æ•ˆæœï¼ŒçœŸæ­£çš„åšå®¢è¿˜æ˜¯è¦pushåˆ°gitä¸Šã€‚å…·ä½“ä¸æ‡‚çš„é—®é¢˜å¯ä»¥æŸ¥çœ‹&lt;a href=&quot;http://luckycathome.com/2016/11/15/%E4%BD%BF%E7%94%A8Jekyll%E5%9C%A8GitHub-Pages%E4%B8%8A%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/&quot;&gt;ä½¿ç”¨Jekyllåœ¨GitHub Pagesä¸Šæ­å»ºä¸ªäººåšå®¢&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section-7&quot;&gt;å…³äºé‡å¤é€ è½®å­&lt;/h1&gt;

&lt;p&gt;å¾ˆæ˜æ˜¾ï¼Œæˆ‘åœ¨é‡å¤é€ è½®å­ã€‚å¯¹äºé€ è½®å­è¿™ä¸ªäº‹æƒ…ï¼Œæˆ‘çš„æƒ³æ³•å¾ˆç®€å•ï¼Œä¸æ˜¯è§‰å¾—æˆ‘ä¸€å®šåšå¾—æ¯”åˆ«äººå¥½ï¼Œåªæ˜¯æƒ³æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•å°½é‡å†™çš„ç»†ä¸€ç‚¹ï¼Œæˆ–è®¸é€‚åˆä¸€äº›äººã€‚å½“ç„¶ï¼Œè¿™ä¸ªè¿‡ç¨‹æ›´æ˜¯å¯ä»¥è®©è‡ªå·±æœ‰æ‰€é•¿è¿›ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section-8&quot;&gt;å…³äºä½œè€…&lt;/h1&gt;

&lt;p&gt;çƒ­çˆ±å¼€æºï¼Œçƒ­çˆ±æŠ˜è…¾çš„iOSç¨‹åºçŒ¿ã€‚æ›´å¤šä¸ªäººä¿¡æ¯å’Œè”ç³»æ–¹å¼å¯ä»¥å‚ç…§&lt;a href=&quot;http://www.LuckyCatHome.com/Resume.io/&quot;&gt;æˆ‘çš„ç®€ä»‹&lt;/a&gt;ã€‚&lt;/p&gt;

</description>
        <pubDate>Thu, 17 Nov 2016 15:22:09 +0800</pubDate>
        <link>http://localhost:4000/2016/11/17/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E6%88%91%E7%9A%84%E5%8D%9A%E5%AE%A2%E4%BD%9C%E4%B8%BAJekyll%E6%A8%A1%E7%89%88/</link>
        <guid isPermaLink="true">http://localhost:4000/2016/11/17/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E6%88%91%E7%9A%84%E5%8D%9A%E5%AE%A2%E4%BD%9C%E4%B8%BAJekyll%E6%A8%A1%E7%89%88/</guid>
        
        <category>Jekyll</category>
        
        
        <category>æ–‡æ¡£</category>
        
      </item>
    
      <item>
        <title>Jekyllé…ç½®å‹è¨€è¯„è®ºæ’ä»¶</title>
        <description>
&lt;p&gt;æˆ‘çš„æ–‡ä»¶ç›®å½•å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/source/Jekyllé…ç½®å‹è¨€è¯„è®ºæ’ä»¶/01.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é¦–å…ˆåœ¨/_includes/LessOrMore/comments-providers/uyanå­˜æ”¾å‹è¨€çš„æ’ä»¶è„šæœ¬ã€‚&lt;/p&gt;

&lt;p&gt;å»&lt;a href=&quot;http://www.uyan.cc/&quot;&gt;å‹è¨€&lt;/a&gt;å®˜ç½‘å»æ³¨å†Œä¸€ä¸ªè´¦å·ï¼ŒæŸ¥çœ‹è‡ªå·±çš„idï¼Œç„¶åæŠŠä¸‹åˆ—ä»£ç æ”¾åœ¨uyanè¿™ä¸ªæ–‡ä»¶ä¸­ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;uyan_frame&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dsq&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'script'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dsq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'text/javascript'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dsq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dsq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'http://v2.uyan.cc/code/uyan.js?uid=ä½ çš„ID'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getElementsByTagName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'head'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getElementsByTagName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'body'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dsq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ¥ä¸‹æ¥å†ç¼–è¾‘/_includes/LessOrMore/commentsæ–‡ä»¶ï¼ŒåŠ ä¸Šuyançš„æ¡ä»¶åˆ¤æ–­ï¼Œæˆ‘çš„è¯¥æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;


  &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;uyan_frame&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dsq&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'script'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dsq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'text/javascript'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dsq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dsq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'http://v2.uyan.cc/code/uyan.js?uid=2119519'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getElementsByTagName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'head'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getElementsByTagName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'body'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dsq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;




&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æœ€ååœ¨ç«™ç‚¹çš„é…ç½®æ–‡ä»¶_config.ymlä¸­æŒ‡å®šç”¨youyanä½œä¸ºè¯„è®ºæ’ä»¶å°±è¡Œäº†&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;c&quot;&gt;# Settings for comments helper&lt;/span&gt;
  &lt;span class=&quot;c&quot;&gt;# Set 'provider' to the comment provider you want to use.&lt;/span&gt;
  &lt;span class=&quot;c&quot;&gt;# Set 'provider' to false to turn commenting off globally.&lt;/span&gt;
  &lt;span class=&quot;c&quot;&gt;#&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;comments&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;provider&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;uyan&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è‡³æ­¤è¯„è®ºæ’ä»¶å°±é…ç½®å¥½äº†ï¼Œå¯ä»¥pushåˆ°Githubä¸Šçœ‹çœ‹æ•ˆæœã€‚åˆ†äº«æ’ä»¶çš„é…ç½®ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚&lt;/p&gt;

&lt;p&gt;ä¸pushæœ¬åœ°é¢„è§ˆçš„è¯å¯ä»¥æŸ¥çœ‹é¡µé¢æ•ˆæœä½†æ˜¯ä¸èƒ½è¯„è®ºï¼Œä¸æ˜¯bugï¼Œpushä¸Šå»å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
</description>
        <pubDate>Wed, 16 Nov 2016 22:15:31 +0800</pubDate>
        <link>http://localhost:4000/2016/11/16/Jekyll%E9%85%8D%E7%BD%AE%E5%8F%8B%E8%A8%80%E8%AF%84%E8%AE%BA%E6%8F%92%E4%BB%B6/</link>
        <guid isPermaLink="true">http://localhost:4000/2016/11/16/Jekyll%E9%85%8D%E7%BD%AE%E5%8F%8B%E8%A8%80%E8%AF%84%E8%AE%BA%E6%8F%92%E4%BB%B6/</guid>
        
        <category>Jekyll</category>
        
        
        <category>æ–‡æ¡£</category>
        
      </item>
    
      <item>
        <title>ä½¿ç”¨Jekyllåœ¨GitHub Pagesä¸Šæ­å»ºä¸ªäººåšå®¢</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#step-1-github&quot; id=&quot;markdown-toc-step-1-github&quot;&gt;Step 1. æœåŠ¡å™¨ï¼šGitHub&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#github&quot; id=&quot;markdown-toc-github&quot;&gt;1.1. ä»€ä¹ˆæ˜¯ GitHubï¼Ÿ&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#github-pages&quot; id=&quot;markdown-toc-github-pages&quot;&gt;1.2. ä»€ä¹ˆæ˜¯GitHub Pagesï¼Ÿ&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#github-pages-1&quot; id=&quot;markdown-toc-github-pages-1&quot;&gt;1.3. åˆ›å»ºGitHub Pagesåšå®¢&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#step-2-jekyll&quot; id=&quot;markdown-toc-step-2-jekyll&quot;&gt;Step 2. å®‰è£…Jekyll&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#jekyll&quot; id=&quot;markdown-toc-jekyll&quot;&gt;2.1. ä»€ä¹ˆæ˜¯ Jekyllï¼Ÿ&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#jekyll-1&quot; id=&quot;markdown-toc-jekyll-1&quot;&gt;2.2. Jekyllç›®å½•&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#jekyll-2&quot; id=&quot;markdown-toc-jekyll-2&quot;&gt;2.3. å®‰è£…Jekyll&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#step-3-&quot; id=&quot;markdown-toc-step-3-&quot;&gt;Step 3. è£…ä¿®åšå®¢&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#section&quot; id=&quot;markdown-toc-section&quot;&gt;3.1. å¦‚ä½•é€‰æ‹©å’Œä¿®æ”¹ä¸»é¢˜ï¼Ÿ&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#jekyll-3&quot; id=&quot;markdown-toc-jekyll-3&quot;&gt;3.2. å¦‚ä½•ä½¿ç”¨Jekyllåšå®¢æ¨¡æ¿&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#step-4-&quot; id=&quot;markdown-toc-step-4-&quot;&gt;Step 4. ç‹¬ç«‹åŸŸå&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#section-1&quot; id=&quot;markdown-toc-section-1&quot;&gt;4.1. è´­ä¹°ç‹¬ç«‹åŸŸå&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#github-1&quot; id=&quot;markdown-toc-github-1&quot;&gt;4.2. GitHubä¸Šçš„ä¿®æ”¹&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#dnspod&quot; id=&quot;markdown-toc-dnspod&quot;&gt;4.3. DnsPodåŸŸåè§£æ&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#godaddyns&quot; id=&quot;markdown-toc-godaddyns&quot;&gt;4.4. Godaddyè®¾ç½®NS&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#step-5-&quot; id=&quot;markdown-toc-step-5-&quot;&gt;Step 5. è¯„è®ºåŠŸèƒ½&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#section-2&quot; id=&quot;markdown-toc-section-2&quot;&gt;5.1. æ³¨å†Œâ€œå‹è¨€â€&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#section-3&quot; id=&quot;markdown-toc-section-3&quot;&gt;5.2. ä½¿ç”¨â€œå‹è¨€â€&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;GitHub Pages&lt;/em&gt;  &lt;em&gt;Jekyll&lt;/em&gt;  &lt;em&gt;ç‹¬ç«‹åŸŸå&lt;/em&gt;  &lt;em&gt;åŸŸåè§£æ&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ç½‘ä¸Šå·²ç»æœ‰è¶³å¤Ÿå¤šçš„ç›¸å…³ä»‹ç»äº†ï¼Œæœ¬äººä¹Ÿæ˜¯æ ¹æ®ä»–äººå†™çš„æ–‡ç« æ¥åšçš„ã€‚å®è·µè¿‡ç¨‹ä¸­å‘ç°å¾ˆå¤šæ–‡ç« éƒ½å¤šå°‘æœ‰äº›è¿‡æ—¶ï¼Œæä¾›çš„æ“ä½œæµç¨‹éƒ½æ˜¯æ—§ç‰ˆç½‘é¡µçš„ï¼Œä»¥è‡³äºå¾ˆå¤šåœ°æ–¹é‡åˆ°éšœç¢ã€‚è¿˜æœ‰ï¼Œå¾ˆå¤šä¸œè¥¿æ²¡æœ‰è¯¦ç»†è§£é‡Šå¯¹äºå°ç™½æ¥è¯´å¾ˆæ˜¯ä¸æ‡‚ã€‚æ€»ä¹‹ï¼Œç£•ç£•ç»Šç»Šçš„ï¼Œåœ¨æ­¤æ•´ç†ä¸‹ï¼Œå¸Œæœ›å¯¹åˆ«äººä¹Ÿèƒ½æœ‰æ‰€ç”¨å¤„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;ç½‘ä¸Šæœ‰å¾ˆå¤šæ­å»ºåšå®¢çš„æ–¹å¼ï¼Œå¦‚æœä½ ä¸çŸ¥é“å¦‚ä½•é€‰æ‹©ï¼Œå¯ä»¥çœ‹çœ‹&lt;a href=&quot;http://www.slant.co/topics/329/~what-is-the-best-solution-for-a-personal-blog&quot;&gt;ã€ŠWhat are the best solutions for a personal blog?ã€‹&lt;/a&gt;ï¼Œæ–‡ç« åˆ†æäº†ä¸åŒåšå®¢å¹³å°çš„ä¼˜ç¼ºç‚¹å’Œé’ˆå¯¹äººç¾¤ã€‚æœ€ç»ˆï¼Œæˆ‘çš„é€‰æ‹©æ˜¯Jekyll+Github Pagesã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;step-1-github&quot;&gt;Step 1. æœåŠ¡å™¨ï¼šGitHub&lt;/h1&gt;

&lt;h2 id=&quot;github&quot;&gt;1.1. ä»€ä¹ˆæ˜¯ GitHubï¼Ÿ&lt;/h2&gt;

&lt;p&gt;åœ¨è¯´GitHubä¹‹å‰ï¼Œå¿…é¡»è¦æåˆ°Gitã€‚Gitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚GitHubå¯ä»¥æ‰˜ç®¡å„ç§Gitç‰ˆæœ¬åº“ï¼Œå¹¶æä¾›ä¸€ä¸ªwebç•Œé¢ã€‚&lt;/p&gt;

&lt;p&gt;Github å°±åƒæ˜¯ç¨‹åºå‘˜ä»¬çš„Facebookï¼Œç¨‹åºå‘˜ä»¬ï¼Œå†™ä»£ç ï¼Œåšé¡¹ç›®ï¼Œåœ¨æ­¤å’Œå…¨ä¸–ç•Œçš„äººä»¬åˆ†äº«ã€‚&lt;/p&gt;

&lt;p&gt;ä¼šä½¿ç”¨GitHubçš„èµ„æºï¼Œæ¯”ä¼šæ­å»ºä¸ªäººåšå®¢çš„ä»·å€¼å¤§å¾—å¤šã€‚&lt;/p&gt;

&lt;h2 id=&quot;github-pages&quot;&gt;1.2. ä»€ä¹ˆæ˜¯GitHub Pagesï¼Ÿ&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;Website for you and your project.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;GitHub Pagesæœ‰ä¸¤ç§ã€‚ä¸€ç§æ˜¯ä¸ºä¸ªäººæˆ–è€…ç»„ç»‡çš„åšå®¢ã€‚ä¸€ç§æ˜¯ä¸ºé¡¹ç›®çš„åšå®¢ã€‚å‰è€…ä¸€ä¸ªè´¦å·åªèƒ½å»ºä¸€ä¸ªï¼Œåè€…ï¼Œå¯ä»¥å»ºå¾ˆå¤šä¸ªã€‚&lt;/p&gt;

&lt;p&gt;è¿™æ ·çš„åšå®¢ï¼Œå…è´¹ã€ç‹¬ç«‹ã€å®‰å…¨ã€‚&lt;/p&gt;

&lt;h2 id=&quot;github-pages-1&quot;&gt;1.3. åˆ›å»ºGitHub Pagesåšå®¢&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;é¦–å…ˆï¼Œæ³¨å†Œ &lt;a href=&quot;https://github.com/&quot;&gt;Github&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;ç„¶åï¼Œå»ºç«‹ä¸€ä¸ªä»“åº“&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/source/ä½¿ç”¨Jekyllåœ¨GitHub-Pagesä¸Šæ­å»ºä¸ªäººåšå®¢/GitHub Pages-01.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Repository name(ä»“åº“å)å¿…é¡»æ˜¯ your_user_name.github.io&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ¯”å¦‚ï¼Œæˆ‘çš„GitHubç”¨æˆ·åæ˜¯LuckyCat7848ï¼Œé‚£ä¹ˆä»“åº“åå°±å–ä¸º LuckyCat7848.github.ioã€‚è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œå¿…é¡»è¿™ä¹ˆå†™ï¼å› ä¸ºGitHubä¸Šçš„ç”¨æˆ·åæ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥ä¸Šé¢è¯´ä¸€ä¸ªè´¦å·åªèƒ½å»ºä¸€ä¸ªä¸ªäººåšå®¢ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;ç„¶åï¼ŒæŒ‰ç…§æç¤ºæ­¥éª¤æ“ä½œ&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;æœ€åï¼Œæ–°å»ºä¸€ä¸ªindex.htmlæ–‡ä»¶ï¼Œpushã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ‰“å¼€ç»ˆç«¯ï¼Œåˆ‡æ¢åˆ°æœ¬åœ°GitHubç›®å½•ä¸‹ã€‚ï¼ˆæœ¬äººä¹‹å‰é…ç½®è¿‡ï¼Œå¦‚æœæ²¡æœ‰æ“ä½œè¿‡çš„ï¼Œè‡ªå·±æ‰¾æ•™ç¨‹å§ã€‚ï¼‰&lt;/p&gt;

&lt;p&gt;å…‹éš†GitHubä¸Šçš„è¿™ä¸ªResponsitoryæ–‡ä»¶å¤¹åˆ°æœ¬åœ°ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/source/ä½¿ç”¨Jekyllåœ¨GitHub-Pagesä¸Šæ­å»ºä¸ªäººåšå®¢/GitHub Pages-02.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åˆ‡æ¢åˆ°è¯¥Responsitoryä¸‹ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªåªå†™ç€Hello Worldçš„.htmlæ–‡ä»¶ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/source/ä½¿ç”¨Jekyllåœ¨GitHub-Pagesä¸Šæ­å»ºä¸ªäººåšå®¢/GitHub Pages-03.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æäº¤è¿™äº›æ”¹åŠ¨ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/source/ä½¿ç”¨Jekyllåœ¨GitHub-Pagesä¸Šæ­å»ºä¸ªäººåšå®¢/GitHub Pages-04.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å®˜ç½‘ä¸Šæœ‰å‘½ä»¤è¡Œå’Œå®¢æˆ·ç«¯ä¸¤ç§æ“ä½œæ–¹å¼ï¼ˆ&lt;a href=&quot;https://pages.github.com/&quot;&gt;å®˜ç½‘æ•™ç¨‹&lt;/a&gt;ï¼‰ã€‚ç­‰ä¸€å°ä¼šï¼Œç½‘ç«™ç”Ÿæ•ˆï¼Œè®¿é—®your_user_name.github.ioï¼Œå°±èƒ½çœ‹è§å®Œæ•´çš„ç½‘é¡µäº†ï¼Œæ­¤æ—¶ç½‘é¡µä¸Šè¿˜åªæœ‰ä¸€å¥Hello Worldã€‚&lt;/p&gt;

&lt;h1 id=&quot;step-2-jekyll&quot;&gt;Step 2. å®‰è£…Jekyll&lt;/h1&gt;

&lt;h2 id=&quot;jekyll&quot;&gt;2.1. ä»€ä¹ˆæ˜¯ Jekyllï¼Ÿ&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;http://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt; is a simple, blog-aware, static site generator.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;http://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt; æ˜¯ä¸€ä¸ªç®€å•çš„åšå®¢å½¢æ€çš„é™æ€ç«™ç‚¹ç”Ÿäº§æœºå™¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è§£é‡Šä¸€ä¸‹ï¼ŒJekyllå¯ä»¥å°†çº¯æ–‡æœ¬è½¬æ¢ä¸ºé™æ€åšå®¢ç½‘ç«™ã€‚ä½ æ•´ä¸ªç½‘ç«™çš„é¡µé¢éƒ½æ˜¯å®ƒç”Ÿæˆçš„ï¼Œä»ä¸»é¡µindexåˆ°æ–‡ç« postã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚ï¼Œæ–‡ç« æ€ä¹ˆå†™ï¼Ÿæ ‡å‡†ç½‘é¡µæ ¼å¼æ˜¯æ‰©å±•æ ‡è®°è¯­è¨€HTMLã€‚çº¯æ‰‹å†™ï¼Ÿæœªå…å¤ªéº»çƒ¦ã€‚å¤§å®¶ï¼Œå¤šåçˆ±Markdownã€‚æ‰€ä»¥ï¼Œå°±ç”¨å®ƒå†™ã€‚ä¸è¿‡ï¼Œä½ éœ€è¦æœ‰ä¸€ä¸ªèƒ½æŠŠä½ ç”¨Markdownæ ¼å¼å†™çš„æ–‡ç« ï¼Œè½¬åŒ–ä¸ºHTMLç½‘é¡µçš„ä¸œè¥¿ï¼Œè¿™é‡Œä½¿ç”¨çš„å°±æ˜¯é™æ€ç½‘é¡µç”Ÿæˆå™¨ã€‚&lt;/p&gt;

&lt;h2 id=&quot;jekyll-1&quot;&gt;2.2. Jekyllç›®å½•&lt;/h2&gt;

&lt;p&gt;è§£é‡Šä¸€ä¸‹æ•´ä¸ªJekyllçš„ç›®å½•:
ä¸ºäº†ä¹‹åä¸è‡³äºå®Œå…¨èŒ«ç„¶ï¼Œå¾ˆå€¼å¾—å…ˆçœ‹ä¸€çœ‹ï¼Œç¬¬ä¸€æ¬¡çœ‹ä¸æ‡‚æ²¡å…³ç³»ï¼Œç”¨ç€ç”¨ç€å°±çŸ¥é“ä»€ä¹ˆæ„æ€äº†ã€‚å°±åƒç»ƒä¹ å‰ä»–å’Œå¼¦çš„è½¬æ¢ï¼Œå¼€å§‹å¾ˆéš¾ï¼Œå¯æ¢ç€æ¢ç€ä½ å°±ä¼šäº†ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªå¾ˆå¥‡æ€ªçš„ç»“æ„æ˜¯ï¼Œæ–‡ä»¶ç›®å½•æ ‘ï¼Œ_config.ymlè¿™æ ·çš„ä»£è¡¨ä¸€ä¸ªæ–‡ä»¶ï¼Œ_draftsè¿™æ ·çš„ä»£è¡¨ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸å®ƒè¿æ¥çš„æ–‡ä»¶ï¼Œæ¯”å¦‚begin-with-the-crazy-ideas.textileï¼Œå°±åœ¨æ–‡ä»¶å¤¹ä¸­ã€‚ä¸€å¼€å§‹ï¼Œæˆ‘æ²¡æ€ä¹ˆçœ‹å®˜æ–¹æ–‡æ¡£ï¼Œå«Œéº»çƒ¦ï¼Œä¸å¦‚ç›´æ¥å¼€å§‹å¹²ã€‚ç»“æœæ˜¯ç»•äº†ä¸å°‘å¼¯è·¯ï¼Œä¿®æ”¹ä¸»é¢˜çš„æ—¶å€™ï¼Œæ‰¾åŠå¤©å„ä¸ªéƒ¨åˆ†ã€‚&lt;/p&gt;

&lt;p&gt;å…ˆè¯´éœ€è¦äº†è§£çš„ï¼Œå…¶ä½™ä»¥åä¾ä¸ªäººéœ€æ±‚å­¦ä¹ ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;_config.yml æ˜¯é…ç½®æ–‡ä»¶ï¼Œä½ å¯ä»¥åœ¨é‡Œé¢é…ç½®ä½ åšå®¢ä¼šç”¨åˆ°çš„å¸¸é‡ï¼Œæ¯”å¦‚åšå®¢åï¼Œé‚®ä»¶ã€‚&lt;/li&gt;
    &lt;li&gt;_includesï¼šå°±æ˜¯ä½ æ–‡ç« å„ä¸ªéƒ¨åˆ†çš„htmlæ–‡ä»¶ï¼Œå¯ä»¥åœ¨å¸ƒå±€ä¸­åŒ…å«è¿™äº›æ–‡ä»¶ã€‚&lt;/li&gt;
    &lt;li&gt;_layoutsï¼šå­˜æ”¾æ¨¡æ¿ã€‚å°±æ˜¯ä½ ç½‘é¡µçš„å¸ƒå±€ï¼Œä¸»é¡µå¸ƒå±€ï¼Œæ–‡ç« å¸ƒå±€ã€‚å½“ç„¶ä¸æ˜¯æŒ‡CSSé‚£æ ·çš„å¸ƒå±€ï¼Œæ˜¯æŒ‡ï¼Œä½ åŒ…å«å“ªäº›åŸºæœ¬çš„å†…å®¹åˆ°é¡µé¢ä¸Šã€‚åŒ…å«çš„å†…å®¹å°±æ˜¯includesé‡Œé¢çš„æ–‡ä»¶ã€‚&lt;/li&gt;
    &lt;li&gt;_posts: å­˜æ”¾åšå®¢æ–‡ç« ã€‚&lt;/li&gt;
    &lt;li&gt;indexï¼šåšå®¢ä¸»é¡µã€‚&lt;/li&gt;
    &lt;li&gt;CNAMEæ–‡ä»¶ï¼šåŸŸååœ°å€ã€‚&lt;/li&gt;
    &lt;li&gt;CSSï¼šå­˜æ”¾åšå®¢æ‰€ç”¨CSSã€‚&lt;/li&gt;
    &lt;li&gt;JS: å­˜æ”¾åšå®¢æ‰€ç”¨JavaScriptã€‚&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¯ä»¥è®¾ç½®æ¯ä¸ªhtmlæ–‡ä»¶çš„title(æ ‡é¢˜)å’Œlayout(å¸ƒå±€)ã€‚æ¯”å¦‚indexçš„layoutä¸€èˆ¬æ˜¯defaultã€‚ä½ ä¹Ÿå¯ä»¥æ·»åŠ å…¶ä»–çš„é¡µé¢ï¼ŒåŠ ä¸Šä¸åŒçš„layoutã€‚&lt;/p&gt;

&lt;p&gt;å½“ä½ æƒ³å®šåˆ¶åšå®¢çš„æ—¶å€™ï¼Œä»¥ä¸Šç›®å½•å°±å¾ˆæœ‰ç”¨äº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;jekyll-2&quot;&gt;2.3. å®‰è£…Jekyll&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;å®‰è£…Rubyï¼ŒMacä¸€èˆ¬é»˜è®¤å®‰è£…äº†Rubyï¼Œè¿™ä¸€æ­¥å¯ä»¥å¿½ç•¥ã€‚&lt;a href=&quot;https://www.ruby-lang.org/zh_cn/downloads/&quot;&gt;å®˜ç½‘å®‰è£…&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;å®‰è£…Bundlerï¼Œåœ¨Terminalä¸­è¾“å…¥ï¼š&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;sudo gem install bundler&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¦‚æœå‡ºç°ä»¥ä¸‹errorï¼šï¼ˆä¸å¥½æ„æ€ï¼Œå›¾ä¸¢å¤±äº†ï¼‰&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨å‘½ä»¤è¡Œï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;sudo gem install -n /usr/local/bin bundler&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;å®‰è£…Jekyllï¼š&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;sudo gem install jekyll&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¦‚æœå‡ºç°ä»¥ä¸‹errorï¼šï¼ˆä¸å¥½æ„æ€ï¼Œå›¾ä¸¢å¤±äº†ï¼‰&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨å‘½ä»¤è¡Œï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;sudo gem install -n /usr/local/bin jekyll&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å»ºè®®ç¿»å¢™å®‰è£…ï¼Œå¢™å†…ä¸çŸ¥æ˜¯å¦ä¼šå‡ºç°é—®é¢˜ã€‚&lt;/p&gt;

&lt;h1 id=&quot;step-3-&quot;&gt;Step 3. è£…ä¿®åšå®¢&lt;/h1&gt;

&lt;h2 id=&quot;section&quot;&gt;3.1. å¦‚ä½•é€‰æ‹©å’Œä¿®æ”¹ä¸»é¢˜ï¼Ÿ&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨ä»–äººå†™å¥½çš„ï¼Œå…è´¹å¼€æºçš„ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;http://jekyllthemes.org/&quot;&gt;Jekyll ä¸»é¢˜&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;å¦ä¸€ç§æ˜¯ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±å†™æˆ–ä¿®æ”¹ï¼Œéœ€è¦æ‡‚ä¸€äº›å‰ç«¯çš„çŸ¥è¯†ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;jekyll-3&quot;&gt;3.2. å¦‚ä½•ä½¿ç”¨Jekyllåšå®¢æ¨¡æ¿&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;é¦–å…ˆï¼Œåœ¨&lt;a href=&quot;http://jekyllthemes.org/&quot;&gt;Jekyll ä¸»é¢˜&lt;/a&gt;æ‰¾åˆ°å–œæ¬¢çš„æ¨¡æ¿å¹¶ä¸‹è½½ä¸‹æ¥ã€‚&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;åœ¨ç»ˆç«¯é‡Œåˆ‡æ¢åˆ°your_user_name.github.ioç›®å½•ä¸‹ï¼ŒæŠŠä¸‹è½½ä¸‹æ¥çš„&lt;strong&gt;æ–‡ä»¶ä¸‹çš„å…¨éƒ¨å†…å®¹&lt;/strong&gt;è½¬ç§»åˆ°å½“å‰ç›®å½•ä¸‹ï¼Œå¯ä»¥ç”¨å‘½ä»¤è¡Œä¹Ÿå¯ä»¥ç›´æ¥åˆ°æ–‡ä»¶å¤¹ä¸‹æ“ä½œï¼Œæ›´æ–¹ä¾¿ã€‚æœ€ç»ˆç›®å½•å¦‚ä¸‹ï¼š&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;è¾“å…¥jekyllå‘½ä»¤æœ¬åœ°æŸ¥çœ‹åšå®¢æ•ˆæœï¼š&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;jekyll serve â€“watch&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è¯¥å‘½ä»¤è¡Œè¾“å…¥åï¼Œjekyllè¿è¡Œèµ·æ¥ï¼Œå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥â€œhttp://localhost:4000/â€æŸ¥çœ‹ç½‘é¡µæ•ˆæœäº†ï¼Œç»ˆç«¯ä¸­æŒ‰â€œCtrl+Câ€åœæ­¢è¿è¡Œè¯¥å‘½ä»¤ã€‚&lt;/p&gt;

&lt;p&gt;æ­¤æ—¶ï¼Œåšå®¢ä¸Šçš„å†…å®¹éƒ½ä¸æ˜¯è‡ªå·±çš„ä¸œè¥¿ã€‚åœ¨ç»ˆç«¯ä¸­ç»ˆæ­¢è¿è¡Œjekyllåï¼Œç¼–è¾‘è¯¥ç›®å½•ä¸‹çš„_config.ymlç­‰æ–‡ä»¶å°±å¯ä»¥ä¿®æ”¹ç½‘é¡µä¸Šçš„å†…å®¹äº†ï¼Œå‚è€ƒä¸Šè¿°jekyllç›®å½•å†…å®¹è‡ªå·±æ…¢æ…¢æ‘¸ç´¢å³å¯ã€‚&lt;/p&gt;

&lt;h1 id=&quot;step-4-&quot;&gt;Step 4. ç‹¬ç«‹åŸŸå&lt;/h1&gt;

&lt;h2 id=&quot;section-1&quot;&gt;4.1. è´­ä¹°ç‹¬ç«‹åŸŸå&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;è´­ä¹°åŸŸåï¼Œè‘—åçš„æœ‰&lt;a href=&quot;https://uk.godaddy.com/&quot;&gt;Godaddy&lt;/a&gt;ï¼Œæ”¯æŒæ”¯ä»˜å®ã€‚åœ¨ç½‘ä¸Šå¯ä»¥æœåˆ°ä¼˜æƒ ç ï¼Œä¼˜æƒ ä¸‹æ¥ä»·æ ¼ä¸é«˜ã€‚&lt;/li&gt;
  &lt;li&gt;æœç´¢è‡ªå·±æƒ³è¦çš„åŸŸåï¼Œè´­ä¹°æ—¶åˆ‡è®°å»æœç´¢ä¼˜æƒ ç ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç»“ç®—çš„æ—¶å€™æœ¬äººæ˜¯ç”¨ä¿¡ç”¨å¡æ”¯ä»˜çš„ï¼Œä¸åŒçš„ä¼˜æƒ ç ä¼˜æƒ çš„äº§å“å’Œä¼˜æƒ å¤šå°‘å’Œæ”¯æŒçš„æ”¯ä»˜æ–¹å¼ä¸åŒï¼Œä¿¡ç”¨å¡çš„è¯è¦ç”¨VISAå…¨çƒå¡ã€‚&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰æˆ‘é‡åˆ°è¿‡ç»“ç®—çš„æ—¶å€™æ€ä¹ˆéƒ½ç»“ç®—ä¸äº†ï¼Œä¹Ÿæ˜¯å› ä¸ºä¼˜æƒ ç çš„é—®é¢˜ï¼Œå¤šè¯•å‡ ä¸ªå°±å¥½äº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;github-1&quot;&gt;4.2. GitHubä¸Šçš„ä¿®æ”¹&lt;/h2&gt;

&lt;p&gt;åœ¨ç»ˆç«¯ä¸­æˆ–GitHubä¸Šåœ¨your_user_name.github.ioä¸‹ä¿®æ”¹CNAMEæ–‡ä»¶ï¼Œåœ¨é‡Œé¢å†™å…¥ä½ åˆšåˆšä¹°çš„åŸŸåï¼Œä¾‹å¦‚æˆ‘çš„æ˜¯â€œLuckyCatHome.comâ€ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ç»ˆç«¯æ”¹çš„è¯æ”¹å®Œè®°å¾—å‘ä¸Šé¢é‚£æ ·æ“ä½œï¼Œæäº¤åˆ°GitHubä¸Šã€‚&lt;/p&gt;

&lt;h2 id=&quot;dnspod&quot;&gt;4.3. DnsPodåŸŸåè§£æ&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://www.dnspod.cn/&quot;&gt;DnsPod&lt;/a&gt;åšåŸŸåè§£æå¤„ç†å¯ä»¥åŠ å¿«åšå®¢çš„è®¿é—®ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;é¦–å…ˆï¼Œæ³¨å†ŒDnsPodsã€‚&lt;/li&gt;
  &lt;li&gt;ç„¶åï¼Œæ·»åŠ è´­ä¹°å¥½çš„åŸŸåï¼š&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/source/ä½¿ç”¨Jekyllåœ¨GitHub-Pagesä¸Šæ­å»ºä¸ªäººåšå®¢/DnsPod-01.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ç„¶åï¼Œè®¾ç½®å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/source/ä½¿ç”¨Jekyllåœ¨GitHub-Pagesä¸Šæ­å»ºä¸ªäººåšå®¢/DnsPod-02.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ç¬¬2ã€3æ¡æ˜¯é»˜è®¤è®¾ç½®å¥½çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;ç¬¬ä¸€æ¡çš„è®°å½•å€¼æ˜¯â€œyour_user_name.github.io.â€ï¼Œioåé¢è¿˜æœ‰ä¸€ä¸ª.ï¼Œæœ‰æ–‡ç« ç‰¹æ³¨äº†ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰è¯•è¿‡ä¸å†™çš„åæœï¼Œè¿˜æ˜¯å†™ä¸Šå§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;æœ€åä¸¤æ¡çš„è®°å½•å€¼æ˜¯GitHub Pagesçš„æœåŠ¡å™¨åœ°å€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä½œç”¨ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;.coméœ€è¦ä½¿ç”¨Aè®°å½•è¿›è¡ŒåŸŸåè§£æã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å‘Šè¯‰æ‰€æœ‰DNSæœåŠ¡å™¨ï¼Œå¯¹äºLuckyCat.comçš„è®¿é—®éƒ½ä¼šè¢«é‡å®šå‘åˆ°LuckyCat7848.github.ioã€‚&lt;/p&gt;

&lt;h2 id=&quot;godaddyns&quot;&gt;4.4. Godaddyè®¾ç½®NS&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;ç‚¹å‡»è¯¥åŸŸåç®­å¤´ä¸‹çš„â€œSet Nameserversâ€ï¼š&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/source/ä½¿ç”¨Jekyllåœ¨GitHub-Pagesä¸Šæ­å»ºä¸ªäººåšå®¢/Godaddy-01.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;æ·»åŠ DnsPodçš„ä¸¤ä¸ªé»˜è®¤è®°å½•å€¼ï¼Œå¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/source/ä½¿ç”¨Jekyllåœ¨GitHub-Pagesä¸Šæ­å»ºä¸ªäººåšå®¢/Godaddy-02.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç¨ç­‰ä¸ª10åˆ†é’Ÿå·¦å³ï¼Œåœ¨æµè§ˆå™¨é‡Œè¾“å…¥ä½ çš„åŸŸåå°±å¯ä»¥çœ‹åˆ°åšå®¢å†…å®¹å•¦ï¼&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä¸è¦å¿˜è®°åˆè¡·ï¼Œåœ¨æŠ˜è…¾ä¹‹åï¼Œè¡¨è¾¾å†™ä½œï¼Œæ‰æ˜¯æœ€é‡è¦çš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;step-5-&quot;&gt;Step 5. è¯„è®ºåŠŸèƒ½&lt;/h1&gt;

&lt;h2 id=&quot;section-2&quot;&gt;5.1. æ³¨å†Œâ€œå‹è¨€â€&lt;/h2&gt;
&lt;p&gt;å†™å¥½çš„åšå®¢å’Œè§‚çœ‹çš„äººäº¤æµæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œäº’åŠ¨å¯ä»¥è®©æˆ‘ä»¬çŸ¥é“è‡ªå·±çš„ä¸è¶³ä¹‹å¤„åŠ ä»¥æ”¹åŠ¨ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯å…è´¹çš„&lt;a href=&quot;http://www.uyan.cc/&quot;&gt;å‹è¨€&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;section-3&quot;&gt;5.2. ä½¿ç”¨â€œå‹è¨€â€&lt;/h2&gt;
&lt;p&gt;åœ¨_config.ymlæ–‡ä»¶ä¸­åŠ ä¸Šä»¥ä¸‹ä¸€æ®µæ–‡å­—å³å¯ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/source/ä½¿ç”¨Jekyllåœ¨GitHub-Pagesä¸Šæ­å»ºä¸ªäººåšå®¢/UYan-01.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨&lt;a href=&quot;https://github.com/LuckyCat7848/LuckyCat7848.github.io&quot;&gt;è¯¥æ¨¡æ¿&lt;/a&gt;çš„è¯åªéœ€è¦åœ¨/_includes/LessOrMore/comments-providers/uyanæ–‡ä»¶ä¸­å°†uidæ”¹æˆä½ æœ¬äººçš„å‹è¨€uidå³å¯ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä¸æ˜¯ä½¿ç”¨è¯¥æ¨¡æ¿çš„è¯ï¼Œå¯ä»¥å‚è€ƒ&lt;a href=&quot;http://luckycathome.com/2016/11/16/Jekyll%E9%85%8D%E7%BD%AE%E5%8F%8B%E8%A8%80%E8%AF%84%E8%AE%BA%E6%8F%92%E4%BB%B6/&quot;&gt;Jekyllé…ç½®æœ‰è¨€è¯„è®ºæ’ä»¶&lt;/a&gt;ã€‚&lt;/p&gt;

</description>
        <pubDate>Tue, 15 Nov 2016 17:55:01 +0800</pubDate>
        <link>http://localhost:4000/2016/11/15/%E4%BD%BF%E7%94%A8Jekyll%E5%9C%A8GitHub-Pages%E4%B8%8A%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</link>
        <guid isPermaLink="true">http://localhost:4000/2016/11/15/%E4%BD%BF%E7%94%A8Jekyll%E5%9C%A8GitHub-Pages%E4%B8%8A%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</guid>
        
        <category>Jekyll</category>
        
        
        <category>æ–‡æ¡£</category>
        
      </item>
    
      <item>
        <title>Xcodeç£ç›˜ç©ºé—´å¤§æ¸…ç†</title>
        <description>
&lt;p&gt;&lt;strong&gt;1.ç§»é™¤å¯¹æ—§è®¾å¤‡çš„æ”¯æŒ&lt;/strong&gt;
&lt;strong&gt;å½±å“ï¼š&lt;/strong&gt;å¯é‡æ–°ç”Ÿæˆï¼›å†è¿æ¥æ—§è®¾å¤‡è°ƒè¯•æ—¶ï¼Œä¼šé‡æ–°è‡ªåŠ¨ç”Ÿæˆã€‚æˆ‘ç§»é™¤äº†4.3.2, 5.0, 5.1ç­‰ç‰ˆæœ¬çš„è®¾å¤‡æ”¯æŒã€‚
&lt;strong&gt;è·¯å¾„ï¼š&lt;/strong&gt;~/Library/Developer/Xcode/iOS DeviceSupport
&lt;strong&gt;é‡Šæ”¾ç©ºé—´ï¼š&lt;/strong&gt;3GB&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2.ç§»é™¤æ—§ç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨æ”¯æŒ&lt;/strong&gt;
&lt;strong&gt;å½±å“ï¼š&lt;/strong&gt;ä¸å¯æ¢å¤ï¼›å¦‚æœéœ€è¦æ—§ç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨ï¼Œå°±éœ€è¦é‡æ–°ä¸‹è½½äº†ã€‚æˆ‘ç§»é™¤äº†4.3.2, 5.0, 5.1ç­‰æ—§ç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨ã€‚
&lt;strong&gt;è·¯å¾„ï¼š&lt;/strong&gt;~/Library/Application Support/iPhone Simulator
&lt;strong&gt;é‡Šæ”¾ç©ºé—´ï¼š&lt;/strong&gt;3GB&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;3.ç§»é™¤æ¨¡æ‹Ÿå™¨çš„ä¸´æ—¶æ–‡ä»¶&lt;/strong&gt;
&lt;strong&gt;å½±å“ï¼š&lt;/strong&gt;å¯é‡æ–°ç”Ÿæˆï¼›å¦‚æœéœ€è¦ä¿ç•™è¾ƒæ–°ç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨ï¼Œä½†tmpæ–‡ä»¶å¤¹å¾ˆå¤§ã€‚æ”¾å¿ƒåˆ å§ï¼Œtmpæ–‡ä»¶å¤¹é‡Œçš„å†…å®¹æ˜¯ä¸é‡è¦çš„ã€‚åœ¨iOS Deviceä¸­ï¼Œå­˜å‚¨ç©ºé—´ä¸è¶³æ—¶ï¼Œtmpæ–‡ä»¶å¤¹æ˜¯å¯èƒ½è¢«æ¸…ç©ºçš„ã€‚
&lt;strong&gt;è·¯å¾„ï¼š&lt;/strong&gt;~/Library/Application Support/iPhone Simulator/6.1/tmp (ä»¥iOS Simulator 6.1ä¸ºä¾‹)
&lt;strong&gt;é‡Šæ”¾ç©ºé—´ï¼š&lt;/strong&gt;2GB&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;4.ç§»é™¤æ¨¡æ‹Ÿå™¨ä¸­å®‰è£…çš„Apps&lt;/strong&gt;
&lt;strong&gt;å½±å“ï¼š&lt;/strong&gt;ä¸å¯æ¢å¤ï¼›å¯¹åº”çš„æ¨¡æ‹Ÿå™¨ä¸­å®‰è£…çš„Appsè¢«æ¸…ç©ºäº†ï¼Œå¦‚æœä¸éœ€è¦å°±åˆ äº†å§ã€‚
&lt;strong&gt;è·¯å¾„ï¼š&lt;/strong&gt;~/Library/Application Support/iPhone Simulator/6.1/Applications (ä»¥iOS Simulator 6.1ä¸ºä¾‹)
&lt;strong&gt;é‡Šæ”¾ç©ºé—´ï¼š&lt;/strong&gt;1GB&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;5.ç§»é™¤Archives&lt;/strong&gt;
&lt;strong&gt;å½±å“ï¼š&lt;/strong&gt;ä¸å¯æ¢å¤ï¼›Adhocæˆ–è€…App Storeç‰ˆæœ¬ä¼šè¢«åˆ é™¤ã€‚å»ºè®®å¤‡ä»½dSYMæ–‡ä»¶å¤¹
&lt;strong&gt;è·¯å¾„ï¼š&lt;/strong&gt;~/Library/Developer/Xcode/Archives
&lt;strong&gt;é‡Šæ”¾ç©ºé—´ï¼š&lt;/strong&gt;6GB&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;6.ç§»é™¤DerivedData&lt;/strong&gt;
&lt;strong&gt;å½±å“ï¼š&lt;/strong&gt;å¯é‡æ–°ç”Ÿæˆï¼›ä¼šåˆ é™¤buildç”Ÿæˆçš„é¡¹ç›®ç´¢å¼•ã€buildè¾“å‡ºä»¥åŠæ—¥å¿—ã€‚é‡æ–°æ‰“å¼€é¡¹ç›®æ—¶ä¼šé‡æ–°ç”Ÿæˆï¼Œå¤§çš„é¡¹ç›®ä¼šè€—è´¹ä¸€äº›æ—¶é—´ã€‚
&lt;strong&gt;è·¯å¾„ï¼š&lt;/strong&gt;~/Library/Developer/Xcode/DerivedData
&lt;strong&gt;é‡Šæ”¾ç©ºé—´ï¼š&lt;/strong&gt;12GB&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;7.ç§»é™¤æ—§çš„Docsets&lt;/strong&gt;
&lt;strong&gt;å½±å“ï¼š&lt;/strong&gt;ä¸å¯æ¢å¤ï¼›å°†åˆ é™¤æ—§çš„Docsetsæ–‡æ¡£
&lt;strong&gt;è·¯å¾„ï¼š&lt;/strong&gt;~/Library/Developer/Shared/Documentation/DocSets
&lt;strong&gt;é‡Šæ”¾ç©ºé—´ï¼š&lt;/strong&gt;2GB&lt;/p&gt;

&lt;p&gt;ä½œè€…ä¸€å…±é‡Šæ”¾å‡ºäº†30GBå·¦å³çš„ç£ç›˜ç©ºé—´ï¼Œè¿™å¯¹128 GBçš„SSDæ¥è¯´å¯æ˜¯ä¸å°çš„æ•°å­—ã€‚å¦‚æœä½ çš„ç£ç›˜ç©ºé—´ä¸ç´§å¼ ï¼Œæˆ–è€…ä½¿ç”¨HDDï¼Œæˆ‘å»ºè®®ä¸è¦è¿›è¡Œè¿™äº›æ“ä½œã€‚ä½¿ç”¨SSDçš„æœ‹å‹é…Œæƒ…æ¸…ç†å§ã€‚&lt;/p&gt;

</description>
        <pubDate>Thu, 08 Sep 2016 08:11:25 +0800</pubDate>
        <link>http://localhost:4000/2016/09/08/Xcode%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E5%A4%A7%E6%B8%85%E7%90%86/</link>
        <guid isPermaLink="true">http://localhost:4000/2016/09/08/Xcode%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E5%A4%A7%E6%B8%85%E7%90%86/</guid>
        
        <category>MAC</category>
        
        
        <category>å®ç”¨æŠ€èƒ½</category>
        
      </item>
    
      <item>
        <title>å°†Excelè¡¨æ ¼è½¬åŒ–ä¸ºplistæ–‡ä»¶ï¼ˆä¸­å›½çœä»½å’ŒåŸå¸‚ä¿¡æ¯ï¼‰</title>
        <description>
&lt;p&gt;å°†å›¾1çš„Excelè¡¨æ ¼è½¬æ¢æˆå›¾2çš„.plistæ–‡ä»¶ï¼Œä¸¤å¼ å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;å›¾1ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/source/å°†Excelè¡¨æ ¼è½¬åŒ–ä¸ºplistæ–‡ä»¶ï¼ˆä¸­å›½çœä»½å’ŒåŸå¸‚ä¿¡æ¯ï¼‰/1479312936089.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å›¾2ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/source/å°†Excelè¡¨æ ¼è½¬åŒ–ä¸ºplistæ–‡ä»¶ï¼ˆä¸­å›½çœä»½å’ŒåŸå¸‚ä¿¡æ¯ï¼‰/1479312949609.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;1.&lt;/strong&gt; å…ˆæŠŠExcelè¡¨æ ¼å¦å­˜ä¸º.csvæ ¼å¼ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/source/å°†Excelè¡¨æ ¼è½¬åŒ–ä¸ºplistæ–‡ä»¶ï¼ˆä¸­å›½çœä»½å’ŒåŸå¸‚ä¿¡æ¯ï¼‰/1479312967213.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2.&lt;/strong&gt; å°†.csvæ–‡ä»¶å†…å®¹å¤åˆ¶ç²˜è´´åˆ°æ–°çš„.txtæ–‡ä»¶ä¸­;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;3.&lt;/strong&gt; å°†.txtæ–‡ä»¶æ‹–æ‹½åˆ°å·¥ç¨‹ä¸­ï¼Œç”¨ä»£ç è¯»å–.txtæ–‡ä»¶å†…å®¹å†™å…¥åˆ°.plistæ–‡ä»¶ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSBundle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mainBundle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pathForResource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ProvincesAndCities&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ofType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;txt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithContentsOfFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;encoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSUTF8StringEncoding&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;è·å–åˆ°&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;excel&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;ä¸­&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;è¡Œçš„æ•°ç»„&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contentsArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;componentsSeparatedByCharactersInSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCharacterSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newlineCharacterSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;savePath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSHomeDirectory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringByAppendingPathComponent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Documents/ProvincesAndCities.plist&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;allArr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contentsArray&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lineStr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contentsArray&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;å°†ä¸€è¡Œæ•°æ®è½¬ä¸ºæ•°ç»„æ ¼å¼ï¼Œå¯¹å…¶éå†ï¼Œè·å–å•ä¸ªæ ¼é‡Œçš„å†…å®¹&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lineArr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lineStr&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;componentsSeparatedByCharactersInSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCharacterSet&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;controlCharacterSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lineArr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;oneStr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lineArr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strIsNilOrEmpty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;oneStr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;NSMutableDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rowDic&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;ç¬¬ä¸€è¡Œæ˜¯çœä»½åç§°&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;rowDic&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableDictionary&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rowDic&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lineArr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;province&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;allArr&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rowDic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;åŸå¸‚æŒ‰æ¯åˆ—å­˜åœ¨æ•°ç»„ä¸­ï¼Œå†ä¿å­˜åˆ°æ¯åˆ—ä¿¡æ¯é‡Œ&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;rowDic&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableDictionary&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dictionaryWithDictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;allArr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;citiesArr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arrayWithArray&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rowDic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cities&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;citiesArr&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;containsObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;oneStr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;citiesArr&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;oneStr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rowDic&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;citiesArr&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;forKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cities&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;allArr&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;replaceObjectAtIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;withObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rowDic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;å†™å…¥åˆ°&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plist&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;æ–‡ä»¶&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;allArr&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;writeToFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;savePath&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;atomically&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;4.&lt;/strong&gt; æœ€åï¼Œå°±å¯ä»¥ç›´æ¥åœ¨å·¥ç¨‹é‡Œåˆ é™¤.txtï¼Œä½¿ç”¨.plistæ–‡ä»¶äº†ã€‚&lt;/p&gt;

</description>
        <pubDate>Mon, 22 Feb 2016 13:45:23 +0800</pubDate>
        <link>http://localhost:4000/2016/02/22/%E5%B0%86Excel%E8%A1%A8%E6%A0%BC%E8%BD%AC%E5%8C%96%E4%B8%BAplist%E6%96%87%E4%BB%B6-%E4%B8%AD%E5%9B%BD%E7%9C%81%E4%BB%BD%E5%92%8C%E5%9F%8E%E5%B8%82%E4%BF%A1%E6%81%AF/</link>
        <guid isPermaLink="true">http://localhost:4000/2016/02/22/%E5%B0%86Excel%E8%A1%A8%E6%A0%BC%E8%BD%AC%E5%8C%96%E4%B8%BAplist%E6%96%87%E4%BB%B6-%E4%B8%AD%E5%9B%BD%E7%9C%81%E4%BB%BD%E5%92%8C%E5%9F%8E%E5%B8%82%E4%BF%A1%E6%81%AF/</guid>
        
        <category>Object-C</category>
        
        
        <category>æŠ€æœ¯</category>
        
      </item>
    
      <item>
        <title>è§†é¢‘æˆªå–&amp;è£å‰ªä¸ºæ­£æ–¹å½¢</title>
        <description>
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#import &amp;lt;AVFoundation/AVFoundation.h&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#import &amp;lt;MobileCoreServices/MobileCoreServices.h&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#import &quot;CJShortMovieCache.h&quot;&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;è°ƒç”¨æœ¬åœ°ç›¸å†Œé€‰å–è§†é¢‘ï¼ˆç”¨ç³»ç»Ÿæ–¹æ³•æˆªå–è§†é¢‘é•¿åº¦ï¼‰&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIImagePickerController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isSourceTypeAvailable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIImagePickerControllerSourceTypeSavedPhotosAlbum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIDevice&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentDevice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;systemVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;floatValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;8.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;UIAlertView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alertView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIAlertView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithTitle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;è¯·åœ¨â€œè®¾ç½®-éšç§-ç…§ç‰‡â€é€‰é¡¹ä¸­å…è®¸çƒˆç«è®¿é—®ä½ çš„ç…§ç‰‡&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cancelButtonTitle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ç¡®å®š&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;otherButtonTitles&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;alertView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alertView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

                &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;UIAlertController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alertController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIAlertController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alertControllerWithTitle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;è¯·åœ¨â€œè®¾ç½®-éšç§-ç…§ç‰‡â€é€‰é¡¹ä¸­å…è®¸çƒˆç«è®¿é—®ä½ çš„ç…§ç‰‡&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;preferredStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIAlertControllerStyleAlert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;UIAlertAction&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancelAction&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIAlertAction&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;actionWithTitle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ç¡®å®š&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIAlertActionStyleCancel&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alertController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancelAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;presentViewController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alertController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;YES&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;completion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;UIImagePickerController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;myImagePickerController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIImagePickerController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;myImagePickerController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sourceType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;UIImagePickerControllerSourceTypeSavedPhotosAlbum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;myImagePickerController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mediaTypes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithObjects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kUTTypeMovie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;myImagePickerController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weakSelf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;myImagePickerController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;allowsEditing&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;myImagePickerController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;videoMaximumDuration&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;myImagePickerController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;videoQuality&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UIImagePickerControllerQualityTypeMedium&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weakSelf&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;presentViewController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;myImagePickerController&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;YES&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;completion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#pragma mark - UIImagePickerControllerDelegate&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imagePickerController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIImagePickerController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;picker&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;didFinishPickingMediaWithInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;picker&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dismissViewControllerAnimated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;YES&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;completion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;è·å–åˆ°è§†é¢‘&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;æˆªå–åçš„è§†é¢‘å·²è‡ªåŠ¨ä¿å­˜åˆ°&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;è·¯å¾„ä¸‹&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;è£å‰ªä¸ºæ­£æ–¹å½¢&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;è½¬ç§»åˆ°æ‰€æœ‰è§†é¢‘ä¸‹çš„ä½ç½®&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trimUrl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectForKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIImagePickerControllerMediaURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;è£å‰ªè§†é¢‘&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cutVideoWithFileUrl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trimUrl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cutVideoWithFileUrl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileUrl&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;å…ˆå–&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;ï¼Œä¸ºäº†å–&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;naturalSize&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assetTrackArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;AVAsset&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asset&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVAsset&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assetWithURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileUrl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;AVAssetTrack&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asset&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tracksWithMediaType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVMediaTypeVideo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectAtIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assetTrackArray&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;renderW&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MIN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;naturalSize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;naturalSize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;è£å‰ªä¸ºæ­£æ–¹å½¢&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ğŸassetTrack.naturalSizeï¼š&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%.0&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;f  &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%.0&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;naturalSize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;naturalSize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;CGAffineTransform&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ğŸè°ƒæ•´å‰: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;f  &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;f  &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;f  &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;f&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;naturalSize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;naturalSize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;differ&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MAX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;naturalSize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;naturalSize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MIN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;naturalSize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;naturalSize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Portrait&lt;/span&gt;  &lt;span class=&quot;mi&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;å®½&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;é«˜&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGAffineTransformMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;differ&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PortraitUpsideDown&lt;/span&gt;  &lt;span class=&quot;mi&quot;&gt;270&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGAffineTransformMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;differ&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.75&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LandscapeRight&lt;/span&gt;  &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;å®½&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;é«˜&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGAffineTransformMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;differ&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LandscapeLeft&lt;/span&gt;  &lt;span class=&quot;mi&quot;&gt;180&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGAffineTransformMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;differ&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.75&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                   &lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;preferredTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ğŸè°ƒæ•´å: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;f  &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;f  &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;f  &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;f&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;layerInstruciton&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;AVMutableVideoCompositionLayerInstruction&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layerInstruciton&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVMutableVideoCompositionLayerInstruction&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;videoCompositionLayerInstructionWithAssetTrack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assetTrack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layerInstruciton&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setTransform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layerTransform&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;atTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kCMTimeZero&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layerInstruciton&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setOpacity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;atTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asset&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;duration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;save&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cutFilePath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CJShortMovieCache&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sharedInstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getKeyPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cutFileURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileURLWithPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cutFilePath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;export&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;AVMutableVideoCompositionInstruction&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mainInstruciton&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVMutableVideoCompositionInstruction&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;videoCompositionInstruction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;mainInstruciton&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timeRange&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CMTimeRangeMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kCMTimeZero&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asset&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;duration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;mainInstruciton&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layerInstructions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layerInstruciton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;AVMutableVideoComposition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mainCompositionInst&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVMutableVideoComposition&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;videoComposition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;mainCompositionInst&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instructions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mainInstruciton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;mainCompositionInst&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;frameDuration&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CMTimeMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;mainCompositionInst&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;renderSize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGSizeMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;renderW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;renderW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;AVAssetExportSession&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exporter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVAssetExportSession&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;initWithAsset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asset&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;presetName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AVAssetExportPresetMediumQuality&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;exporter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;videoComposition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mainCompositionInst&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;exporter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outputURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cutFileURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;exporter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outputFileType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AVFileTypeMPEG4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;exporter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shouldOptimizeForNetworkUse&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exporter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exportAsynchronouslyWithCompletionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exporter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AVAssetExportSessionStatusFailed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;exporting failed &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exporter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AVAssetExportSessionStatusCompleted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;exporting completed&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;NSRange&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;varRange&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileUrl&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;absoluteString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rangeOfString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/var&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tmpPath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileUrl&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;absoluteString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;substringFromIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;varRange&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileExistsAtPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tmpPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSFileManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defaultManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;removeItemAtPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tmpPath&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Delete /tmp/ repeat video success&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Delete /tmp/ repeat video failed&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;No duplicate video found under /tmp/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AVAssetExportSessionStatusCancelled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;export cancelled&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Fri, 08 Jan 2016 11:45:55 +0800</pubDate>
        <link>http://localhost:4000/2016/01/08/%E8%A7%86%E9%A2%91%E6%88%AA%E5%8F%96&%E8%A3%81%E5%89%AA%E4%B8%BA%E6%AD%A3%E6%96%B9%E5%BD%A2/</link>
        <guid isPermaLink="true">http://localhost:4000/2016/01/08/%E8%A7%86%E9%A2%91%E6%88%AA%E5%8F%96&%E8%A3%81%E5%89%AA%E4%B8%BA%E6%AD%A3%E6%96%B9%E5%BD%A2/</guid>
        
        <category>Object-C</category>
        
        
        <category>æŠ€æœ¯</category>
        
      </item>
    
      <item>
        <title>AVFoundationçŸ¥è¯†ç‚¹ï¼šè‡ªå®šä¹‰ç›¸æœº</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#section&quot; id=&quot;markdown-toc-section&quot;&gt;ä¸€ã€é¦–å…ˆå£°æ˜ä»¥ä¸‹å¯¹è±¡&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#section-1&quot; id=&quot;markdown-toc-section-1&quot;&gt;äºŒã€åˆå§‹åŒ–å„ä¸ªå¯¹è±¡&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#section-2&quot; id=&quot;markdown-toc-section-2&quot;&gt;ä¸‰ã€æ‹ç…§æ‹¿åˆ°ç›¸åº”å›¾ç‰‡&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#section-3&quot; id=&quot;markdown-toc-section-3&quot;&gt;å››ã€ä¿å­˜ç…§ç‰‡åˆ°ç›¸å†Œ&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#section-4&quot; id=&quot;markdown-toc-section-4&quot;&gt;äº”ã€å‰åç½®æ‘„åƒå¤´çš„åˆ‡æ¢&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#section-5&quot; id=&quot;markdown-toc-section-5&quot;&gt;å…­ã€ç›¸æœºçš„å…¶å®ƒå‚æ•°è®¾ç½®&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#section-6&quot; id=&quot;markdown-toc-section-6&quot;&gt;ä¸ƒã€é‡åˆ°çš„ä¸€äº›å‘å’Œè§£å†³åŠæ³•&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#section-7&quot; id=&quot;markdown-toc-section-7&quot;&gt;å…«ã€å†™åœ¨æœ€å&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ‰‹åŠ¨è°ƒç”¨iPhoneçš„ç›¸æœºç¡¬ä»¶ï¼Œåˆ†ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/source/AVFoundationçŸ¥è¯†ç‚¹ï¼šè‡ªå®šä¹‰ç›¸æœº/01.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;section&quot;&gt;ä¸€ã€é¦–å…ˆå£°æ˜ä»¥ä¸‹å¯¹è±¡&lt;/h1&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#import &amp;lt;AVFoundation/AVFoundation.h&amp;gt;&lt;/span&gt;
//æ•è·è®¾å¤‡ï¼Œé€šå¸¸æ˜¯å‰ç½®æ‘„åƒå¤´ï¼Œåç½®æ‘„åƒå¤´ï¼Œéº¦å…‹é£ï¼ˆéŸ³é¢‘è¾“å…¥ï¼‰
property &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;nonatomic, strong&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; AVCaptureDevice &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;device;

//AVCaptureDeviceInput ä»£è¡¨è¾“å…¥è®¾å¤‡ï¼Œä»–ä½¿ç”¨AVCaptureDevice æ¥åˆå§‹åŒ–
@property &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;nonatomic, strong&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; AVCaptureDeviceInput &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;input;

//è¾“å‡ºå›¾ç‰‡
@property &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;nonatomic ,strong&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; AVCaptureStillImageOutput &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;imageOutput;

//sessionï¼šç”±ä»–æŠŠè¾“å…¥è¾“å‡ºç»“åˆåœ¨ä¸€èµ·ï¼Œå¹¶å¼€å§‹å¯åŠ¨æ•è·è®¾å¤‡ï¼ˆæ‘„åƒå¤´ï¼‰
@property &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;nonatomic, strong&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; AVCaptureSession &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;session;

//å›¾åƒé¢„è§ˆå±‚ï¼Œå®æ—¶æ˜¾ç¤ºæ•è·çš„å›¾åƒ
@property &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;nonatomic ,strong&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; AVCaptureVideoPreviewLayer &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;previewLayer;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;section-1&quot;&gt;äºŒã€åˆå§‹åŒ–å„ä¸ªå¯¹è±¡&lt;/h1&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;void&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;cameraDistrict
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
//    AVCaptureDevicePositionBack  åç½®æ‘„åƒå¤´
//    AVCaptureDevicePositionFront å‰ç½®æ‘„åƒå¤´
   self.device &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self cameraWithPosition:AVCaptureDevicePositionFront];
    self.input &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;AVCaptureDeviceInput alloc] initWithDevice:self.device error:nil];

    self.imageOutput &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;AVCaptureStillImageOutput alloc] init];

    self.session &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;AVCaptureSession alloc] init];
    //     æ‹¿åˆ°çš„å›¾åƒçš„å¤§å°å¯ä»¥è‡ªè¡Œè®¾å®š
    //    AVCaptureSessionPreset320x240
    //    AVCaptureSessionPreset352x288
    //    AVCaptureSessionPreset640x480
    //    AVCaptureSessionPreset960x540
    //    AVCaptureSessionPreset1280x720
    //    AVCaptureSessionPreset1920x1080
    //    AVCaptureSessionPreset3840x2160
    self.session.sessionPreset &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; AVCaptureSessionPreset640x480;
    //è¾“å…¥è¾“å‡ºè®¾å¤‡ç»“åˆ
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;([&lt;/span&gt;self.session canAddInput:self.input]&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.session addInput:self.input];
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;([&lt;/span&gt;self.session canAddOutput:self.imageOutput]&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.session addOutput:self.imageOutput];
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    //é¢„è§ˆå±‚çš„ç”Ÿæˆ
    self.previewLayer &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;AVCaptureVideoPreviewLayer alloc] initWithSession:self.session];
    self.previewLayer.frame &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CGRectMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0, 64, SCREEN_WIDTH, SCREEN_HEIGHT-64&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
    self.previewLayer.videoGravity &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; AVLayerVideoGravityResizeAspectFill;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.view.layer addSublayer:self.previewLayer];
    //è®¾å¤‡å–æ™¯å¼€å§‹
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.session startRunning];
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;([&lt;/span&gt;_device lockForConfiguration:nil]&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    //è‡ªåŠ¨é—ªå…‰ç¯ï¼Œ
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;([&lt;/span&gt;_device isFlashModeSupported:AVCaptureFlashModeAuto]&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;_device setFlashMode:AVCaptureFlashModeAuto];
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        //è‡ªåŠ¨ç™½å¹³è¡¡,ä½†æ˜¯å¥½åƒä¸€ç›´éƒ½è¿›ä¸å»
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;([&lt;/span&gt;_device isWhiteBalanceModeSupported:AVCaptureWhiteBalanceModeAutoWhiteBalance]&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;_device setWhiteBalanceMode:AVCaptureWhiteBalanceModeAutoWhiteBalance];
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;_device unlockForConfiguration];
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ ¹æ®å‰åç½®ä½ç½®æ‹¿åˆ°ç›¸åº”çš„æ‘„åƒå¤´ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;AVCaptureDevice &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;cameraWithPosition:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;AVCaptureDevicePosition&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;position&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    NSArray &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;devices &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; AVCaptureDevice &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;device &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;devices &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; device.position &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; position &lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return &lt;/span&gt;device;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return &lt;/span&gt;nil;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;section-2&quot;&gt;ä¸‰ã€æ‹ç…§æ‹¿åˆ°ç›¸åº”å›¾ç‰‡&lt;/h1&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;void&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;photoBtnDidClick
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    AVCaptureConnection &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;conntion &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.imageOutput connectionWithMediaType:AVMediaTypeVideo];
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;!conntion&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
          NSLog&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;@&lt;span class=&quot;s2&quot;&gt;&quot;æ‹ç…§å¤±è´¥!&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
          &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;;
          &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.imageOutput captureStillImageAsynchronouslyFromConnection:conntion completionHandler:^&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;CMSampleBufferRef imageDataSampleBuffer, NSError &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;error&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;imageDataSampleBuffer &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; nil&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; ;
          &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        NSData &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;imageData &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageDataSampleBuffer];
        self.image &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;UIImage imageWithData:imageData];
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.session stopRunning];
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.view addSubview:self.cameraImageView];
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;section-3&quot;&gt;å››ã€ä¿å­˜ç…§ç‰‡åˆ°ç›¸å†Œ&lt;/h1&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#pragma - ä¿å­˜è‡³ç›¸å†Œ&lt;/span&gt;
- &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;void&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;saveImageToPhotoAlbum:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;UIImage&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;savedImage
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    UIImageWriteToSavedPhotosAlbum&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;savedImage, self, @selector&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;image:didFinishSavingWithError:contextInfo:&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, NULL&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
// æŒ‡å®šå›è°ƒæ–¹æ³•

- &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;void&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;image: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;UIImage &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; image didFinishSavingWithError: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;NSError &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; error contextInfo: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;void &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; contextInfo

&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    NSString &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;msg &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; nil ;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;error !&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; NULL&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
        msg &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; @&lt;span class=&quot;s2&quot;&gt;&quot;ä¿å­˜å›¾ç‰‡å¤±è´¥&quot;&lt;/span&gt; ;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        msg &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; @&lt;span class=&quot;s2&quot;&gt;&quot;ä¿å­˜å›¾ç‰‡æˆåŠŸ&quot;&lt;/span&gt; ;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    UIAlertView &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;alert &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;UIAlertView alloc] initWithTitle:@&lt;span class=&quot;s2&quot;&gt;&quot;ä¿å­˜å›¾ç‰‡ç»“æœæç¤º&quot;&lt;/span&gt;
                                            message:msg
                                            delegate:self
                                          cancelButtonTitle:@&lt;span class=&quot;s2&quot;&gt;&quot;ç¡®å®š&quot;&lt;/span&gt;
                                          otherButtonTitles:nil];
    &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;alert show];
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;section-4&quot;&gt;äº”ã€å‰åç½®æ‘„åƒå¤´çš„åˆ‡æ¢&lt;/h1&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;void&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;changeCamera&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    NSUInteger cameraCount &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo] count];
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;cameraCount &amp;gt; 1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        NSError &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;error;
        //ç»™æ‘„åƒå¤´çš„åˆ‡æ¢æ·»åŠ ç¿»è½¬åŠ¨ç”»
        CATransition &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;animation &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;CATransition animation]ï¼›
        animation.duration &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; .5fï¼›
        animation.timingFunction &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
        animation.type &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; @&lt;span class=&quot;s2&quot;&gt;&quot;oglFlip&quot;&lt;/span&gt;;

        AVCaptureDevice &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;newCamera &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; nil;
        AVCaptureDeviceInput &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;newInput &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; nil;
  //æ‹¿åˆ°å¦å¤–ä¸€ä¸ªæ‘„åƒå¤´ä½ç½®
        AVCaptureDevicePosition position &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;_input device] position];
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;position &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; AVCaptureDevicePositionFront&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            newCamera &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self cameraWithPosition:AVCaptureDevicePositionBack];
            animation.subtype &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; kCATransitionFromLeft;//åŠ¨ç”»ç¿»è½¬æ–¹å‘
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            newCamera &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self cameraWithPosition:AVCaptureDevicePositionFront];
            animation.subtype &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; kCATransitionFromRight;//åŠ¨ç”»ç¿»è½¬æ–¹å‘
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        //ç”Ÿæˆæ–°çš„è¾“å…¥
        newInput &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;AVCaptureDeviceInput deviceInputWithDevice:newCamera error:nil];
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.previewLayer addAnimation:animation forKey:nil];
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;newInput !&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; nil&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.session beginConfiguration];
            &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.session removeInput:self.input];
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;([&lt;/span&gt;self.session canAddInput:newInput]&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.session addInput:newInput];
                self.input &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; newInput;

            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.session addInput:self.input];
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.session commitConfiguration];

        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            NSLog&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;@&lt;span class=&quot;s2&quot;&gt;&quot;toggle carema failed, error = %@&quot;&lt;/span&gt;, error&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;section-5&quot;&gt;å…­ã€ç›¸æœºçš„å…¶å®ƒå‚æ•°è®¾ç½®&lt;/h1&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//AVCaptureFlashMode  é—ªå…‰ç¯
//AVCaptureFocusMode  å¯¹ç„¦
//AVCaptureExposureMode  æ›å…‰
//AVCaptureWhiteBalanceMode  ç™½å¹³è¡¡
//é—ªå…‰ç¯å’Œç™½å¹³è¡¡å¯ä»¥åœ¨ç”Ÿæˆç›¸æœºæ—¶å€™è®¾ç½®
//æ›å…‰è¦æ ¹æ®å¯¹ç„¦ç‚¹çš„å…‰çº¿çŠ¶å†µè€Œå†³å®š,æ‰€ä»¥å’Œå¯¹ç„¦ä¸€å—å†™
//pointä¸ºç‚¹å‡»çš„ä½ç½®
- &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;void&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;focusAtPoint:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;CGPoint&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;point&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    CGSize size &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; self.view.bounds.size;
    CGPoint focusPoint &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CGPointMake&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; point.y /size.height ,1-point.x/size.width &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
    NSError &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;error;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;([&lt;/span&gt;self.device lockForConfiguration:&amp;amp;error]&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        //å¯¹ç„¦æ¨¡å¼å’Œå¯¹ç„¦ç‚¹
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;([&lt;/span&gt;self.device isFocusModeSupported:AVCaptureFocusModeAutoFocus]&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.device setFocusPointOfInterest:focusPoint];
            &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.device setFocusMode:AVCaptureFocusModeAutoFocus];
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        //æ›å…‰æ¨¡å¼å’Œæ›å…‰ç‚¹
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;([&lt;/span&gt;self.device isExposureModeSupported:AVCaptureExposureModeAutoExpose &lt;span class=&quot;o&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.device setExposurePointOfInterest:focusPoint];
            &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.device setExposureMode:AVCaptureExposureModeAutoExpose];
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;self.device unlockForConfiguration];
        //è®¾ç½®å¯¹ç„¦åŠ¨ç”»
        _focusView.center &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; point;
        _focusView.hidden &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; NO;
        &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;UIView animateWithDuration:0.3 animations:^&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            _focusView.transform &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CGAffineTransformMakeScale&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1.25, 1.25&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;completion:^&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;BOOL finished&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;UIView animateWithDuration:0.5 animations:^&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                _focusView.transform &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; CGAffineTransformIdentity;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; completion:^&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;BOOL finished&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                _focusView.hidden &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; YES;
            &lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;;
        &lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;section-6&quot;&gt;ä¸ƒã€é‡åˆ°çš„ä¸€äº›å‘å’Œè§£å†³åŠæ³•&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;å‰åç½®æ‘„åƒå¤´çš„åˆ‡æ¢
ã€€ã€€å‰åå€¼ä¸èƒ½åˆ‡æ¢ï¼Œå„ç§å°è¯•æ‰¾äº†åŠå¤©æ²¡æ‰¾åˆ°æœ‰åŸå› ã€‚åæ¥å‘ç°æˆ‘åœ¨è®¾ç½®å›¾ç‰‡å°ºå¯¸çš„æ—¶å€™è®¾ç½®ä¸º1080P [self.session canSetSessionPreset: AVCaptureSessionPreset1920x1080] ï¼Œå‰ç½®æ‘„åƒå¤´å¹¶ä¸æ”¯æŒè¿™ä¹ˆå¤§çš„å°ºå¯¸ï¼Œæ‰€ä»¥å°±ä¸èƒ½åˆ‡æ¢å‰ç½®æ‘„åƒå¤´ã€‚æˆ‘éªŒè¯äº†ä¸‹ å‰ç½®æ‘„åƒå¤´æœ€é«˜æ”¯æŒ720P,720Pä»¥å†…å¯è‡ªç”±åˆ‡æ¢ã€‚ã€€ã€€å½“ç„¶ä¹Ÿå¯ä»¥åœ¨å‰åç½®æ‘„åƒå¤´åˆ‡æ¢çš„æ—¶å€™ï¼Œæ ¹æ®å‰åæ‘„åƒå¤´æ¥è®¾ç½®ä¸åŒçš„å°ºå¯¸ï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ç„¦ç‚¹ä½ç½®
ã€€ã€€CGPoint focusPoint = CGPointMake( point.y /size.height ,1-point.x/size.width );
setExposurePointOfInterestï¼šfocusPoint å‡½æ•°åé¢Pointå–å€¼èŒƒå›´æ˜¯å–æ™¯æ¡†å·¦ä¸Šè§’ï¼ˆ0ï¼Œ0ï¼‰åˆ°å–æ™¯æ¡†å³ä¸‹è§’ï¼ˆ1ï¼Œ1ï¼‰ä¹‹é—´ã€‚å®˜æ–¹æ˜¯è¿™ä¹ˆå†™çš„ï¼š
ã€€ã€€The value of this property is a CGPoint that determines the receiverâ€™s focus point of interest, if it has one. A value of (0,0) indicates that the camera should focus on the top left corner of the image, while a value of (1,1) indicates that it should focus on the bottom right. The default value is (0.5,0.5).
ã€€ã€€æˆ‘ä¹Ÿè¯•äº†æŒ‰è¿™ä¸ªæ¥ä½†ä½ç½®å°±æ˜¯ä¸å¯¹ï¼Œåªèƒ½æŒ‰ä¸Šé¢çš„å†™æ³•æ‰å¯ä»¥ã€‚å‰é¢æ˜¯ç‚¹å‡»ä½ç½®çš„y/PreviewLayerçš„é«˜åº¦ï¼Œåé¢æ˜¯1-ç‚¹å‡»ä½ç½®çš„x/PreviewLayerçš„å®½åº¦&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å¯¹ç„¦å’Œæ›å…‰
ã€€ã€€æˆ‘åœ¨è®¾ç½®å¯¹ç„¦æ˜¯ å…ˆè®¾ç½®äº†æ¨¡å¼setFocusModeï¼Œåè®¾ç½®å¯¹ç„¦ä½ç½®ï¼Œå°±ä¼šå¯¼è‡´å¾ˆå¥‡æ€ªçš„ç°è±¡ï¼Œå¯¹ç„¦ä½ç½®æ˜¯ä½ ä¸Šæ¬¡ç‚¹å‡»çš„ä½ç½®ã€‚æ‰€ä»¥ä¸€å®šè¦å…ˆè®¾ç½®ä½ç½®ï¼Œå†è®¾ç½®å¯¹ç„¦æ¨¡å¼ã€‚
ã€€ã€€æ›å…‰åŒä¸Š&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;section-7&quot;&gt;å…«ã€å†™åœ¨æœ€å&lt;/h1&gt;

&lt;p&gt;ã€€ã€€é™„ä¸Šdemo:https://github.com/nanshanyi/photographDemo
ã€€ã€€å¸¸ç”¨åˆ°çš„åŸºæœ¬å°±è¿™ä¹ˆå¤šï¼Œå†™çš„å¹¶ä¸å®Œå–„ï¼Œæœ‰ä»€ä¹ˆä¸å¯¹çš„ï¼Œæ¬¢è¿å¤§å®¶æ‰¹è¯„æŒ‡æ­£ï¼Œå…±åŒå­¦ä¹ ã€‚&lt;/p&gt;
</description>
        <pubDate>Wed, 05 Aug 2015 13:55:06 +0800</pubDate>
        <link>http://localhost:4000/2015/08/05/AVFoundation%E7%9F%A5%E8%AF%86%E7%82%B9-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9B%B8%E6%9C%BA/</link>
        <guid isPermaLink="true">http://localhost:4000/2015/08/05/AVFoundation%E7%9F%A5%E8%AF%86%E7%82%B9-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9B%B8%E6%9C%BA/</guid>
        
        <category>Object-C</category>
        
        
        <category>æŠ€æœ¯</category>
        
      </item>
    
  </channel>
</rss>
